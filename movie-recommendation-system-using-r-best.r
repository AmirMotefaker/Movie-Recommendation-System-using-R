{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/amirmotefaker/movie-recommendation-system-using-r-best?scriptVersionId=118843466\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown","outputs":[],"execution_count":0},{"cell_type":"markdown","id":"2e0e5466","metadata":{"_execution_state":"idle","_uuid":"051d70d956493feee0c6d64651c6a088724dca2a","papermill":{"duration":0.008805,"end_time":"2023-02-11T09:16:31.894166","exception":false,"start_time":"2023-02-11T09:16:31.885361","status":"completed"},"tags":[]},"source":["# What is Movie Recommendation?\n","- A movie recommendation system, or a movie recommender system, is an ML-based approach to filtering or predicting the users’ film preferences based on their past choices and behavior. It’s an advanced filtration mechanism that predicts the possible movie choices of the concerned user and their preferences towards a domain-specific item, aka movie.\n","\n","# Filtration Strategies for Movie Recommendation Systems\n","- The most popular categories of the ML algorithms used for movie recommendations include content-based filtering and collaborative filtering systems.\n","    - Content-Based Filtering\n","    - Collaborative Filtering\n","        - Collaborative filtering algorithms are divided into two categories:\n","\n","            - User-based collaborative filtering. The idea is to look for similar patterns in movie preferences in the target user and other users in the database.\n","            - Item-based collaborative filtering. The basic concept here is to look for similar items (movies) that target users rate or interact with.\n","\n","\n","# How to Build a Movie Recommendation System?\n","- The basics of film recommendation engines are in machine learning, we could on to building an actual movie recommendation system.\n","    1. Data\n","        - ML systems need data, so find and import the essential libraries with movie datasets that already have global ratings.\n","    2. Analysis \n","        - Create generic recommendations of top-rated movies from the existing dataset.\n","    3. Personalization \n","        - Get personalized ratings by providing your own movie scores.\n","    4. Strategy \n","        - Implement a content-based or collaborative filtering strategy.\n","    5. Combination \n","        - Combine recommendation lists to get a reasonable estimate across the ratings. The combined dataset of movie ratings can now be used for either filtering model.\n","        \n","# Best Movie Datasets for Recommendation Systems in ML\n","- [MovieLens 25M data set](https://grouplens.org/datasets/movielens/)\n","- [IMDB Datasets](https://www.imdb.com/interfaces/)\n","- [Linguistic Data of 32k Film Subtitles with IMBDb Meta-Data](https://data.world/robertjoellewis/film-subtitles)\n","- [Film data set from UCI](https://archive.ics.uci.edu/ml/datasets/Movie)\n","- [Full MovieLens dataset on Kaggle](https://www.kaggle.com/rounakbanik/the-movies-dataset)\n","- [Cornell Film Review Data](http://www.cs.cornell.edu/people/pabo/movie-review-data/)\n","- [French National Cinema Center datasets](https://www.data.gouv.fr/fr/organizations/centre-national-du-cinema-et-de-l-image-animee/)\n","- [Movie Industry on Kaggle](https://www.kaggle.com/danielgrijalvas/movies)\n","- [Movie Body Counts](http://moviebodycounts.com/)\n","- [Movie datasets on data.world](https://data.world/datasets/movies)\n","\n","# Top Movie Recommendation System Use Cases\n","- [Netflix](https://www.netflix.com/)\n","- [Amazon](https://www.primevideo.com/)\n","- [YouTube](https://www.youtube.com/)\n","\n","##### Reference: [LabelYourData](https://labelyourdata.com/articles/movie-recommendation-with-machine-learning#introduction_to_the_movie_recommendation_system_architecture)\n","\n","# Important points of Movie Recommendation\n","\n","- Recommendation systems play an important role in e-commerce and online streaming services, such as Netflix, YouTube, and Amazon. Making the right recommendation for the next product, music or movie increases user retention and satisfaction, leading to sales and profit growth. Companies competing for customer loyalty invest in systems that capture and analyze the user’s preferences and offer products or services with a higher likelihood of purchase.\n","\n","- The economic impact of such a company-customer relationship is clear: Amazon is the largest online retail company by sales and part of its success comes from the recommendation system and marketing based on user preferences. In 2006 Netflix offered a one million dollar prize2 for the person or group that could improve their recommendation system by at least 10%.\n","\n","- Usually, recommendation systems are based on a rating scale from 1 to 5 grades or stars, with 1 indicating the lowest satisfaction and 5 being the highest satisfaction. Other indicators can also be used, such as comments posted on previously used items; video, music, or link shared with friends; percentage of movies watched or music listened; web pages visited and time spent on each page; product category; and any other interaction with the company’s web site or application can be used as a predictor.\n","\n","- The primary goal of recommendation systems is to help users find what they want based on their preferences and previous interactions and predict the rating for a new item. In this document, we create a movie recommendation system using the MovieLens dataset and apply the lessons learned during Harvard’s Data Science Professional Certificate3 program.\n","\n","- This document is structured as follows. Chapter 1 describes the dataset and summarizes the goal of the project and the key steps that were performed. In chapter 2 we explain the process and techniques used, such as data cleaning, data exploration, and visualization, any insights gained, and the modeling approach. In chapter 3 we present the modeling results and discuss the model performance. We conclude in chapter 4 with a brief summary of the report, its limitations, and future work.\n","\n","# MovieLens Dataset\n","- GroupLens is a research lab at the [University of Minnesota](https://twin-cities.umn.edu/) that has collected and made available rating data for movies on the [MovieLens website](https://grouplens.org/datasets/movielens/).\n","\n","- The complete MovieLens dataset consists of 27 million ratings of 58,000 movies by 280,000 users. The research presented in this paper is based on a subset of this dataset with 10 million ratings on 10,000 movies by 72,000 users.\n","\n","# Most common loss functions in ML\n","\n","- Mean Absolute Error/L1 Loss (MAE)\n","    - Mean absolute error, is measured as the average of the sum of absolute differences between predictions and actual observations. Like MSE, this as well measures the magnitude of error without considering their direction. Unlike MSE, MAE needs more complicated tools such as linear programming to compute the gradients. Plus MAE is more robust to outliers since it does not make use of squares.\n","    \n","    \n","- Mean Square Error/Quadratic Loss/L2 Loss (MSE)\n","    - Mean square error is measured as the average squared difference between predictions and actual observations. It’s only concerned with the average magnitude of error irrespective of their direction. However, due to squaring, predictions that are far away from actual values are penalized heavily in comparison to less deviated predictions. Plus MSE has nice mathematical properties which make it easier to calculate gradients.\n","    \n","    \n","- Root Mean Square Error (RMSE)\n","    - Root mean square error or root mean square deviation is one of the most commonly used measures for evaluating the quality of predictions. It shows how far predictions fall from measured true values using Euclidean distance.\n","    - To compute RMSE, calculate the residual (difference between prediction and truth) for each data point, compute the norm of residual for each data point, compute the mean of residuals, and take the square root of that mean. RMSE is commonly used in supervised learning applications, as RMSE uses and needs true measurements at each predicted data point."]},{"cell_type":"markdown","id":"6eb7b684","metadata":{"papermill":{"duration":0.007465,"end_time":"2023-02-11T09:16:31.909112","exception":false,"start_time":"2023-02-11T09:16:31.901647","status":"completed"},"tags":[]},"source":["# Data Preparation"]},{"cell_type":"markdown","id":"910053f1","metadata":{"papermill":{"duration":0.006896,"end_time":"2023-02-11T09:16:31.923036","exception":false,"start_time":"2023-02-11T09:16:31.91614","status":"completed"},"tags":[]},"source":["## Install Libraries"]},{"cell_type":"code","execution_count":1,"id":"5686609f","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:16:31.941485Z","iopub.status.busy":"2023-02-11T09:16:31.939208Z","iopub.status.idle":"2023-02-11T09:16:36.453664Z","shell.execute_reply":"2023-02-11T09:16:36.451392Z"},"papermill":{"duration":4.526528,"end_time":"2023-02-11T09:16:36.456495","exception":false,"start_time":"2023-02-11T09:16:31.929967","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["Loading required package: tidyverse\n","\n","── \u001b[1mAttaching packages\u001b[22m ─────────────────────────────────────── tidyverse 1.3.2 ──\n","\u001b[32m✔\u001b[39m \u001b[34mggplot2\u001b[39m 3.4.0      \u001b[32m✔\u001b[39m \u001b[34mpurrr  \u001b[39m 1.0.1 \n","\u001b[32m✔\u001b[39m \u001b[34mtibble \u001b[39m 3.1.8      \u001b[32m✔\u001b[39m \u001b[34mdplyr  \u001b[39m 1.0.10\n","\u001b[32m✔\u001b[39m \u001b[34mtidyr  \u001b[39m 1.2.1      \u001b[32m✔\u001b[39m \u001b[34mstringr\u001b[39m 1.5.0 \n","\u001b[32m✔\u001b[39m \u001b[34mreadr  \u001b[39m 2.1.3      \u001b[32m✔\u001b[39m \u001b[34mforcats\u001b[39m 0.5.2 \n","── \u001b[1mConflicts\u001b[22m ────────────────────────────────────────── tidyverse_conflicts() ──\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n","Loading required package: caret\n","\n","Loading required package: lattice\n","\n","\n","Attaching package: ‘caret’\n","\n","\n","The following object is masked from ‘package:purrr’:\n","\n","    lift\n","\n","\n","The following object is masked from ‘package:httr’:\n","\n","    progress\n","\n","\n","Loading required package: data.table\n","\n","\n","Attaching package: ‘data.table’\n","\n","\n","The following objects are masked from ‘package:dplyr’:\n","\n","    between, first, last\n","\n","\n","The following object is masked from ‘package:purrr’:\n","\n","    transpose\n","\n","\n"]}],"source":["if(!require(tidyverse)) \n","  install.packages(\"tidyverse\", repos = \"http://cran.us.r-project.org\")\n","if(!require(caret)) \n","  install.packages(\"caret\", repos = \"http://cran.us.r-project.org\")\n","if(!require(data.table)) \n","  install.packages(\"data.table\", repos = \"http://cran.us.r-project.org\")\n","\n","library(tidyverse)\n","library(caret)\n","library(data.table)"]},{"cell_type":"markdown","id":"11c1d64f","metadata":{"papermill":{"duration":0.00772,"end_time":"2023-02-11T09:16:36.472192","exception":false,"start_time":"2023-02-11T09:16:36.464472","status":"completed"},"tags":[]},"source":["## Read Dataset"]},{"cell_type":"code","execution_count":2,"id":"ae2922f8","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:16:36.522532Z","iopub.status.busy":"2023-02-11T09:16:36.489927Z","iopub.status.idle":"2023-02-11T09:19:26.218826Z","shell.execute_reply":"2023-02-11T09:19:26.216644Z"},"papermill":{"duration":169.743345,"end_time":"2023-02-11T09:19:26.223204","exception":false,"start_time":"2023-02-11T09:16:36.479859","status":"completed"},"tags":[]},"outputs":[],"source":["# MovieLens 10M dataset:\n","# https://grouplens.org/datasets/movielens/10m/\n","# http://files.grouplens.org/datasets/movielens/ml-10m.zip\n","\n","ratings <- fread(text = gsub(\"::\", \"\\t\", \n","                 readLines(\"/kaggle/input/movielens-10m-dataset-latest-version/ml-10M100K/ratings.dat\")),\n","                 col.names = c(\"userId\", \"movieId\", \"rating\", \"timestamp\"))"]},{"cell_type":"code","execution_count":3,"id":"b61f2a58","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:26.250416Z","iopub.status.busy":"2023-02-11T09:19:26.248799Z","iopub.status.idle":"2023-02-11T09:19:26.545238Z","shell.execute_reply":"2023-02-11T09:19:26.543333Z"},"papermill":{"duration":0.313164,"end_time":"2023-02-11T09:19:26.549663","exception":false,"start_time":"2023-02-11T09:19:26.236499","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.table: 10000054 × 4</caption>\n","<thead>\n","\t<tr><th scope=col>userId</th><th scope=col>movieId</th><th scope=col>rating</th><th scope=col>timestamp</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td>122</td><td>5</td><td>838985046</td></tr>\n","\t<tr><td>1</td><td>185</td><td>5</td><td>838983525</td></tr>\n","\t<tr><td>1</td><td>231</td><td>5</td><td>838983392</td></tr>\n","\t<tr><td>1</td><td>292</td><td>5</td><td>838983421</td></tr>\n","\t<tr><td>1</td><td>316</td><td>5</td><td>838983392</td></tr>\n","\t<tr><td>1</td><td>329</td><td>5</td><td>838983392</td></tr>\n","\t<tr><td>1</td><td>355</td><td>5</td><td>838984474</td></tr>\n","\t<tr><td>1</td><td>356</td><td>5</td><td>838983653</td></tr>\n","\t<tr><td>1</td><td>362</td><td>5</td><td>838984885</td></tr>\n","\t<tr><td>1</td><td>364</td><td>5</td><td>838983707</td></tr>\n","\t<tr><td>1</td><td>370</td><td>5</td><td>838984596</td></tr>\n","\t<tr><td>1</td><td>377</td><td>5</td><td>838983834</td></tr>\n","\t<tr><td>1</td><td>420</td><td>5</td><td>838983834</td></tr>\n","\t<tr><td>1</td><td>466</td><td>5</td><td>838984679</td></tr>\n","\t<tr><td>1</td><td>480</td><td>5</td><td>838983653</td></tr>\n","\t<tr><td>1</td><td>520</td><td>5</td><td>838984679</td></tr>\n","\t<tr><td>1</td><td>539</td><td>5</td><td>838984068</td></tr>\n","\t<tr><td>1</td><td>586</td><td>5</td><td>838984068</td></tr>\n","\t<tr><td>1</td><td>588</td><td>5</td><td>838983339</td></tr>\n","\t<tr><td>1</td><td>589</td><td>5</td><td>838983778</td></tr>\n","\t<tr><td>1</td><td>594</td><td>5</td><td>838984679</td></tr>\n","\t<tr><td>1</td><td>616</td><td>5</td><td>838984941</td></tr>\n","\t<tr><td>2</td><td>110</td><td>5</td><td>868245777</td></tr>\n","\t<tr><td>2</td><td>151</td><td>3</td><td>868246450</td></tr>\n","\t<tr><td>2</td><td>260</td><td>5</td><td>868244562</td></tr>\n","\t<tr><td>2</td><td>376</td><td>3</td><td>868245920</td></tr>\n","\t<tr><td>2</td><td>539</td><td>3</td><td>868246262</td></tr>\n","\t<tr><td>2</td><td>590</td><td>5</td><td>868245608</td></tr>\n","\t<tr><td>2</td><td>648</td><td>2</td><td>868244699</td></tr>\n","\t<tr><td>2</td><td>719</td><td>3</td><td>868246191</td></tr>\n","\t<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>\n","\t<tr><td>71567</td><td>1396</td><td>3</td><td>912580688</td></tr>\n","\t<tr><td>71567</td><td>1407</td><td>2</td><td>912578457</td></tr>\n","\t<tr><td>71567</td><td>1527</td><td>5</td><td>912580647</td></tr>\n","\t<tr><td>71567</td><td>1580</td><td>3</td><td>912580688</td></tr>\n","\t<tr><td>71567</td><td>1584</td><td>3</td><td>912580647</td></tr>\n","\t<tr><td>71567</td><td>1598</td><td>2</td><td>912649143</td></tr>\n","\t<tr><td>71567</td><td>1690</td><td>3</td><td>912578406</td></tr>\n","\t<tr><td>71567</td><td>1717</td><td>1</td><td>912578457</td></tr>\n","\t<tr><td>71567</td><td>1721</td><td>4</td><td>912649271</td></tr>\n","\t<tr><td>71567</td><td>1748</td><td>3</td><td>912580647</td></tr>\n","\t<tr><td>71567</td><td>1769</td><td>3</td><td>912649037</td></tr>\n","\t<tr><td>71567</td><td>1792</td><td>2</td><td>912649171</td></tr>\n","\t<tr><td>71567</td><td>1805</td><td>4</td><td>912649010</td></tr>\n","\t<tr><td>71567</td><td>1833</td><td>3</td><td>912649171</td></tr>\n","\t<tr><td>71567</td><td>1876</td><td>3</td><td>912580722</td></tr>\n","\t<tr><td>71567</td><td>1909</td><td>2</td><td>912580688</td></tr>\n","\t<tr><td>71567</td><td>1917</td><td>4</td><td>912580787</td></tr>\n","\t<tr><td>71567</td><td>1920</td><td>4</td><td>912578247</td></tr>\n","\t<tr><td>71567</td><td>1982</td><td>1</td><td>912580553</td></tr>\n","\t<tr><td>71567</td><td>1983</td><td>1</td><td>912580553</td></tr>\n","\t<tr><td>71567</td><td>1984</td><td>1</td><td>912580553</td></tr>\n","\t<tr><td>71567</td><td>1985</td><td>1</td><td>912580553</td></tr>\n","\t<tr><td>71567</td><td>1986</td><td>1</td><td>912580553</td></tr>\n","\t<tr><td>71567</td><td>2012</td><td>3</td><td>912580722</td></tr>\n","\t<tr><td>71567</td><td>2028</td><td>5</td><td>912580344</td></tr>\n","\t<tr><td>71567</td><td>2107</td><td>1</td><td>912580553</td></tr>\n","\t<tr><td>71567</td><td>2126</td><td>2</td><td>912649143</td></tr>\n","\t<tr><td>71567</td><td>2294</td><td>5</td><td>912577968</td></tr>\n","\t<tr><td>71567</td><td>2338</td><td>2</td><td>912578016</td></tr>\n","\t<tr><td>71567</td><td>2384</td><td>2</td><td>912578173</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.table: 10000054 × 4\n","\\begin{tabular}{llll}\n"," userId & movieId & rating & timestamp\\\\\n"," <int> & <int> & <dbl> & <int>\\\\\n","\\hline\n","\t 1 & 122 & 5 & 838985046\\\\\n","\t 1 & 185 & 5 & 838983525\\\\\n","\t 1 & 231 & 5 & 838983392\\\\\n","\t 1 & 292 & 5 & 838983421\\\\\n","\t 1 & 316 & 5 & 838983392\\\\\n","\t 1 & 329 & 5 & 838983392\\\\\n","\t 1 & 355 & 5 & 838984474\\\\\n","\t 1 & 356 & 5 & 838983653\\\\\n","\t 1 & 362 & 5 & 838984885\\\\\n","\t 1 & 364 & 5 & 838983707\\\\\n","\t 1 & 370 & 5 & 838984596\\\\\n","\t 1 & 377 & 5 & 838983834\\\\\n","\t 1 & 420 & 5 & 838983834\\\\\n","\t 1 & 466 & 5 & 838984679\\\\\n","\t 1 & 480 & 5 & 838983653\\\\\n","\t 1 & 520 & 5 & 838984679\\\\\n","\t 1 & 539 & 5 & 838984068\\\\\n","\t 1 & 586 & 5 & 838984068\\\\\n","\t 1 & 588 & 5 & 838983339\\\\\n","\t 1 & 589 & 5 & 838983778\\\\\n","\t 1 & 594 & 5 & 838984679\\\\\n","\t 1 & 616 & 5 & 838984941\\\\\n","\t 2 & 110 & 5 & 868245777\\\\\n","\t 2 & 151 & 3 & 868246450\\\\\n","\t 2 & 260 & 5 & 868244562\\\\\n","\t 2 & 376 & 3 & 868245920\\\\\n","\t 2 & 539 & 3 & 868246262\\\\\n","\t 2 & 590 & 5 & 868245608\\\\\n","\t 2 & 648 & 2 & 868244699\\\\\n","\t 2 & 719 & 3 & 868246191\\\\\n","\t ⋮ & ⋮ & ⋮ & ⋮\\\\\n","\t 71567 & 1396 & 3 & 912580688\\\\\n","\t 71567 & 1407 & 2 & 912578457\\\\\n","\t 71567 & 1527 & 5 & 912580647\\\\\n","\t 71567 & 1580 & 3 & 912580688\\\\\n","\t 71567 & 1584 & 3 & 912580647\\\\\n","\t 71567 & 1598 & 2 & 912649143\\\\\n","\t 71567 & 1690 & 3 & 912578406\\\\\n","\t 71567 & 1717 & 1 & 912578457\\\\\n","\t 71567 & 1721 & 4 & 912649271\\\\\n","\t 71567 & 1748 & 3 & 912580647\\\\\n","\t 71567 & 1769 & 3 & 912649037\\\\\n","\t 71567 & 1792 & 2 & 912649171\\\\\n","\t 71567 & 1805 & 4 & 912649010\\\\\n","\t 71567 & 1833 & 3 & 912649171\\\\\n","\t 71567 & 1876 & 3 & 912580722\\\\\n","\t 71567 & 1909 & 2 & 912580688\\\\\n","\t 71567 & 1917 & 4 & 912580787\\\\\n","\t 71567 & 1920 & 4 & 912578247\\\\\n","\t 71567 & 1982 & 1 & 912580553\\\\\n","\t 71567 & 1983 & 1 & 912580553\\\\\n","\t 71567 & 1984 & 1 & 912580553\\\\\n","\t 71567 & 1985 & 1 & 912580553\\\\\n","\t 71567 & 1986 & 1 & 912580553\\\\\n","\t 71567 & 2012 & 3 & 912580722\\\\\n","\t 71567 & 2028 & 5 & 912580344\\\\\n","\t 71567 & 2107 & 1 & 912580553\\\\\n","\t 71567 & 2126 & 2 & 912649143\\\\\n","\t 71567 & 2294 & 5 & 912577968\\\\\n","\t 71567 & 2338 & 2 & 912578016\\\\\n","\t 71567 & 2384 & 2 & 912578173\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.table: 10000054 × 4\n","\n","| userId &lt;int&gt; | movieId &lt;int&gt; | rating &lt;dbl&gt; | timestamp &lt;int&gt; |\n","|---|---|---|---|\n","| 1 | 122 | 5 | 838985046 |\n","| 1 | 185 | 5 | 838983525 |\n","| 1 | 231 | 5 | 838983392 |\n","| 1 | 292 | 5 | 838983421 |\n","| 1 | 316 | 5 | 838983392 |\n","| 1 | 329 | 5 | 838983392 |\n","| 1 | 355 | 5 | 838984474 |\n","| 1 | 356 | 5 | 838983653 |\n","| 1 | 362 | 5 | 838984885 |\n","| 1 | 364 | 5 | 838983707 |\n","| 1 | 370 | 5 | 838984596 |\n","| 1 | 377 | 5 | 838983834 |\n","| 1 | 420 | 5 | 838983834 |\n","| 1 | 466 | 5 | 838984679 |\n","| 1 | 480 | 5 | 838983653 |\n","| 1 | 520 | 5 | 838984679 |\n","| 1 | 539 | 5 | 838984068 |\n","| 1 | 586 | 5 | 838984068 |\n","| 1 | 588 | 5 | 838983339 |\n","| 1 | 589 | 5 | 838983778 |\n","| 1 | 594 | 5 | 838984679 |\n","| 1 | 616 | 5 | 838984941 |\n","| 2 | 110 | 5 | 868245777 |\n","| 2 | 151 | 3 | 868246450 |\n","| 2 | 260 | 5 | 868244562 |\n","| 2 | 376 | 3 | 868245920 |\n","| 2 | 539 | 3 | 868246262 |\n","| 2 | 590 | 5 | 868245608 |\n","| 2 | 648 | 2 | 868244699 |\n","| 2 | 719 | 3 | 868246191 |\n","| ⋮ | ⋮ | ⋮ | ⋮ |\n","| 71567 | 1396 | 3 | 912580688 |\n","| 71567 | 1407 | 2 | 912578457 |\n","| 71567 | 1527 | 5 | 912580647 |\n","| 71567 | 1580 | 3 | 912580688 |\n","| 71567 | 1584 | 3 | 912580647 |\n","| 71567 | 1598 | 2 | 912649143 |\n","| 71567 | 1690 | 3 | 912578406 |\n","| 71567 | 1717 | 1 | 912578457 |\n","| 71567 | 1721 | 4 | 912649271 |\n","| 71567 | 1748 | 3 | 912580647 |\n","| 71567 | 1769 | 3 | 912649037 |\n","| 71567 | 1792 | 2 | 912649171 |\n","| 71567 | 1805 | 4 | 912649010 |\n","| 71567 | 1833 | 3 | 912649171 |\n","| 71567 | 1876 | 3 | 912580722 |\n","| 71567 | 1909 | 2 | 912580688 |\n","| 71567 | 1917 | 4 | 912580787 |\n","| 71567 | 1920 | 4 | 912578247 |\n","| 71567 | 1982 | 1 | 912580553 |\n","| 71567 | 1983 | 1 | 912580553 |\n","| 71567 | 1984 | 1 | 912580553 |\n","| 71567 | 1985 | 1 | 912580553 |\n","| 71567 | 1986 | 1 | 912580553 |\n","| 71567 | 2012 | 3 | 912580722 |\n","| 71567 | 2028 | 5 | 912580344 |\n","| 71567 | 2107 | 1 | 912580553 |\n","| 71567 | 2126 | 2 | 912649143 |\n","| 71567 | 2294 | 5 | 912577968 |\n","| 71567 | 2338 | 2 | 912578016 |\n","| 71567 | 2384 | 2 | 912578173 |\n","\n"],"text/plain":["         userId movieId rating timestamp\n","1        1      122     5      838985046\n","2        1      185     5      838983525\n","3        1      231     5      838983392\n","4        1      292     5      838983421\n","5        1      316     5      838983392\n","6        1      329     5      838983392\n","7        1      355     5      838984474\n","8        1      356     5      838983653\n","9        1      362     5      838984885\n","10       1      364     5      838983707\n","11       1      370     5      838984596\n","12       1      377     5      838983834\n","13       1      420     5      838983834\n","14       1      466     5      838984679\n","15       1      480     5      838983653\n","16       1      520     5      838984679\n","17       1      539     5      838984068\n","18       1      586     5      838984068\n","19       1      588     5      838983339\n","20       1      589     5      838983778\n","21       1      594     5      838984679\n","22       1      616     5      838984941\n","23       2      110     5      868245777\n","24       2      151     3      868246450\n","25       2      260     5      868244562\n","26       2      376     3      868245920\n","27       2      539     3      868246262\n","28       2      590     5      868245608\n","29       2      648     2      868244699\n","30       2      719     3      868246191\n","⋮        ⋮      ⋮       ⋮      ⋮        \n","10000025 71567  1396    3      912580688\n","10000026 71567  1407    2      912578457\n","10000027 71567  1527    5      912580647\n","10000028 71567  1580    3      912580688\n","10000029 71567  1584    3      912580647\n","10000030 71567  1598    2      912649143\n","10000031 71567  1690    3      912578406\n","10000032 71567  1717    1      912578457\n","10000033 71567  1721    4      912649271\n","10000034 71567  1748    3      912580647\n","10000035 71567  1769    3      912649037\n","10000036 71567  1792    2      912649171\n","10000037 71567  1805    4      912649010\n","10000038 71567  1833    3      912649171\n","10000039 71567  1876    3      912580722\n","10000040 71567  1909    2      912580688\n","10000041 71567  1917    4      912580787\n","10000042 71567  1920    4      912578247\n","10000043 71567  1982    1      912580553\n","10000044 71567  1983    1      912580553\n","10000045 71567  1984    1      912580553\n","10000046 71567  1985    1      912580553\n","10000047 71567  1986    1      912580553\n","10000048 71567  2012    3      912580722\n","10000049 71567  2028    5      912580344\n","10000050 71567  2107    1      912580553\n","10000051 71567  2126    2      912649143\n","10000052 71567  2294    5      912577968\n","10000053 71567  2338    2      912578016\n","10000054 71567  2384    2      912578173"]},"metadata":{},"output_type":"display_data"}],"source":["ratings"]},{"cell_type":"code","execution_count":4,"id":"856401d7","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:26.571824Z","iopub.status.busy":"2023-02-11T09:19:26.570124Z","iopub.status.idle":"2023-02-11T09:19:26.650533Z","shell.execute_reply":"2023-02-11T09:19:26.648463Z"},"papermill":{"duration":0.094506,"end_time":"2023-02-11T09:19:26.653911","exception":false,"start_time":"2023-02-11T09:19:26.559405","status":"completed"},"tags":[]},"outputs":[],"source":["movies <- str_split_fixed(readLines(\"/kaggle/input/movielens-10m-dataset-latest-version/ml-10M100K/movies.dat\"), \"\\\\::\", 3)\n","colnames(movies) <- c(\"movieId\", \"title\", \"genres\")"]},{"cell_type":"code","execution_count":5,"id":"74a80bbd","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:26.674005Z","iopub.status.busy":"2023-02-11T09:19:26.672312Z","iopub.status.idle":"2023-02-11T09:19:26.703723Z","shell.execute_reply":"2023-02-11T09:19:26.701709Z"},"papermill":{"duration":0.045049,"end_time":"2023-02-11T09:19:26.706991","exception":false,"start_time":"2023-02-11T09:19:26.661942","status":"completed"},"tags":[]},"outputs":[],"source":["movies <- as.data.frame(movies) %>% mutate(movieId = as.numeric(levels(movieId))[movieId],\n","                                           title = as.character(title),\n","                                           genres = as.character(genres))"]},{"cell_type":"code","execution_count":6,"id":"cc9e7412","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:26.727908Z","iopub.status.busy":"2023-02-11T09:19:26.72618Z","iopub.status.idle":"2023-02-11T09:19:26.797989Z","shell.execute_reply":"2023-02-11T09:19:26.79595Z"},"papermill":{"duration":0.085475,"end_time":"2023-02-11T09:19:26.800833","exception":false,"start_time":"2023-02-11T09:19:26.715358","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.frame: 10681 × 3</caption>\n","<thead>\n","\t<tr><th scope=col>movieId</th><th scope=col>title</th><th scope=col>genres</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>NA</td><td>Toy Story (1995)                                               </td><td>Adventure|Animation|Children|Comedy|Fantasy</td></tr>\n","\t<tr><td>NA</td><td>Jumanji (1995)                                                 </td><td>Adventure|Children|Fantasy                 </td></tr>\n","\t<tr><td>NA</td><td>Grumpier Old Men (1995)                                        </td><td>Comedy|Romance                             </td></tr>\n","\t<tr><td>NA</td><td>Waiting to Exhale (1995)                                       </td><td>Comedy|Drama|Romance                       </td></tr>\n","\t<tr><td>NA</td><td>Father of the Bride Part II (1995)                             </td><td>Comedy                                     </td></tr>\n","\t<tr><td>NA</td><td>Heat (1995)                                                    </td><td>Action|Crime|Thriller                      </td></tr>\n","\t<tr><td>NA</td><td>Sabrina (1995)                                                 </td><td>Comedy|Romance                             </td></tr>\n","\t<tr><td>NA</td><td>Tom and Huck (1995)                                            </td><td>Adventure|Children                         </td></tr>\n","\t<tr><td>NA</td><td>Sudden Death (1995)                                            </td><td>Action                                     </td></tr>\n","\t<tr><td>NA</td><td>GoldenEye (1995)                                               </td><td>Action|Adventure|Thriller                  </td></tr>\n","\t<tr><td>NA</td><td>American President, The (1995)                                 </td><td>Comedy|Drama|Romance                       </td></tr>\n","\t<tr><td>NA</td><td>Dracula: Dead and Loving It (1995)                             </td><td>Comedy|Horror                              </td></tr>\n","\t<tr><td>NA</td><td>Balto (1995)                                                   </td><td>Animation|Children                         </td></tr>\n","\t<tr><td>NA</td><td>Nixon (1995)                                                   </td><td>Drama                                      </td></tr>\n","\t<tr><td>NA</td><td>Cutthroat Island (1995)                                        </td><td>Action|Adventure|Romance                   </td></tr>\n","\t<tr><td>NA</td><td>Casino (1995)                                                  </td><td>Crime|Drama                                </td></tr>\n","\t<tr><td>NA</td><td>Sense and Sensibility (1995)                                   </td><td>Comedy|Drama|Romance                       </td></tr>\n","\t<tr><td>NA</td><td>Four Rooms (1995)                                              </td><td>Comedy|Drama|Thriller                      </td></tr>\n","\t<tr><td>NA</td><td>Ace Ventura: When Nature Calls (1995)                          </td><td>Comedy                                     </td></tr>\n","\t<tr><td>NA</td><td>Money Train (1995)                                             </td><td>Action|Comedy|Crime|Drama|Thriller         </td></tr>\n","\t<tr><td>NA</td><td>Get Shorty (1995)                                              </td><td>Action|Comedy|Drama                        </td></tr>\n","\t<tr><td>NA</td><td>Copycat (1995)                                                 </td><td>Crime|Drama|Horror|Mystery|Thriller        </td></tr>\n","\t<tr><td>NA</td><td>Assassins (1995)                                               </td><td>Action|Crime|Thriller                      </td></tr>\n","\t<tr><td>NA</td><td>Powder (1995)                                                  </td><td>Drama|Sci-Fi                               </td></tr>\n","\t<tr><td>NA</td><td>Leaving Las Vegas (1995)                                       </td><td>Drama|Romance                              </td></tr>\n","\t<tr><td>NA</td><td>Othello (1995)                                                 </td><td>Drama                                      </td></tr>\n","\t<tr><td>NA</td><td>Now and Then (1995)                                            </td><td>Drama                                      </td></tr>\n","\t<tr><td>NA</td><td>Persuasion (1995)                                              </td><td>Drama|Romance                              </td></tr>\n","\t<tr><td>NA</td><td>City of Lost Children, The (Cité des enfants perdus, La) (1995)</td><td>Adventure|Drama|Fantasy|Mystery|Sci-Fi     </td></tr>\n","\t<tr><td>NA</td><td>Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)           </td><td>Crime|Drama                                </td></tr>\n","\t<tr><td>⋮</td><td>⋮</td><td>⋮</td></tr>\n","\t<tr><td>NA</td><td>Battle of Britain, The (Why We Fight, 4) (1943)         </td><td>Documentary|War              </td></tr>\n","\t<tr><td>NA</td><td>Small Cuts (Petites coupures) (2003)                    </td><td>Drama|Romance                </td></tr>\n","\t<tr><td>NA</td><td>Arabian Nights (1942)                                   </td><td>Action|Adventure             </td></tr>\n","\t<tr><td>NA</td><td>Blackbird, The (1926)                                   </td><td>Crime|Drama                  </td></tr>\n","\t<tr><td>NA</td><td>Battle of Russia, The (Why We Fight, 5) (1943)          </td><td>Documentary|War              </td></tr>\n","\t<tr><td>NA</td><td>More the Merrier, The (1943)                            </td><td>Comedy|Romance               </td></tr>\n","\t<tr><td>NA</td><td>Tuya's Marriage (Tuya de hun shi) (2006)                </td><td>Drama|Romance                </td></tr>\n","\t<tr><td>NA</td><td>Face of a Fugitive (1959)                               </td><td>Western                      </td></tr>\n","\t<tr><td>NA</td><td>Dirty Dozen, The: The Fatal Mission (1988)              </td><td>Action|Adventure|War         </td></tr>\n","\t<tr><td>NA</td><td>Curious Case of Benjamin Button, The (2008)             </td><td>Drama|Fantasy|Mystery|Romance</td></tr>\n","\t<tr><td>NA</td><td>Divide and Conquer (Why We Fight, 3) (1943)             </td><td>Documentary|War              </td></tr>\n","\t<tr><td>NA</td><td>Yes Man (2008)                                          </td><td>Comedy                       </td></tr>\n","\t<tr><td>NA</td><td>Hexed (1993)                                            </td><td>Comedy                       </td></tr>\n","\t<tr><td>NA</td><td>Valkyrie (2008)                                         </td><td>Drama|Thriller|War           </td></tr>\n","\t<tr><td>NA</td><td>Birds of America (2008)                                 </td><td>Comedy|Drama                 </td></tr>\n","\t<tr><td>NA</td><td>Pete Seeger: The Power of Song (2007)                   </td><td>Documentary                  </td></tr>\n","\t<tr><td>NA</td><td>5 Centimeters per Second (Byôsoku 5 senchimêtoru) (2007)</td><td>Animation|Drama|Romance      </td></tr>\n","\t<tr><td>NA</td><td>War of the Worlds (2005)                                </td><td>Action                       </td></tr>\n","\t<tr><td>NA</td><td>War of the Worlds 2: The Next Wave (2008)               </td><td>Action                       </td></tr>\n","\t<tr><td>NA</td><td>Constantine's Sword (2007)                              </td><td>Documentary                  </td></tr>\n","\t<tr><td>NA</td><td>Impulse (2008)                                          </td><td>Mystery|Thriller             </td></tr>\n","\t<tr><td>NA</td><td>Zona Zamfirova (2002)                                   </td><td>Comedy|Drama                 </td></tr>\n","\t<tr><td>NA</td><td>Double Dynamite (1951)                                  </td><td>Comedy|Musical               </td></tr>\n","\t<tr><td>NA</td><td>Death Kiss, The (1933)                                  </td><td>Comedy|Mystery               </td></tr>\n","\t<tr><td>NA</td><td>Ben X (2007)                                            </td><td>Drama                        </td></tr>\n","\t<tr><td>NA</td><td>Bedtime Stories (2008)                                  </td><td>Adventure|Children|Comedy    </td></tr>\n","\t<tr><td>NA</td><td>Manhattan Melodrama (1934)                              </td><td>Crime|Drama|Romance          </td></tr>\n","\t<tr><td>NA</td><td>Choke (2008)                                            </td><td>Comedy|Drama                 </td></tr>\n","\t<tr><td>NA</td><td>Revolutionary Road (2008)                               </td><td>Drama|Romance                </td></tr>\n","\t<tr><td>NA</td><td><span style=white-space:pre-wrap>Blackadder Back &amp; Forth (1999)                          </span></td><td><span style=white-space:pre-wrap>Comedy                       </span></td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.frame: 10681 × 3\n","\\begin{tabular}{lll}\n"," movieId & title & genres\\\\\n"," <dbl> & <chr> & <chr>\\\\\n","\\hline\n","\t NA & Toy Story (1995)                                                & Adventure\\textbar{}Animation\\textbar{}Children\\textbar{}Comedy\\textbar{}Fantasy\\\\\n","\t NA & Jumanji (1995)                                                  & Adventure\\textbar{}Children\\textbar{}Fantasy                 \\\\\n","\t NA & Grumpier Old Men (1995)                                         & Comedy\\textbar{}Romance                             \\\\\n","\t NA & Waiting to Exhale (1995)                                        & Comedy\\textbar{}Drama\\textbar{}Romance                       \\\\\n","\t NA & Father of the Bride Part II (1995)                              & Comedy                                     \\\\\n","\t NA & Heat (1995)                                                     & Action\\textbar{}Crime\\textbar{}Thriller                      \\\\\n","\t NA & Sabrina (1995)                                                  & Comedy\\textbar{}Romance                             \\\\\n","\t NA & Tom and Huck (1995)                                             & Adventure\\textbar{}Children                         \\\\\n","\t NA & Sudden Death (1995)                                             & Action                                     \\\\\n","\t NA & GoldenEye (1995)                                                & Action\\textbar{}Adventure\\textbar{}Thriller                  \\\\\n","\t NA & American President, The (1995)                                  & Comedy\\textbar{}Drama\\textbar{}Romance                       \\\\\n","\t NA & Dracula: Dead and Loving It (1995)                              & Comedy\\textbar{}Horror                              \\\\\n","\t NA & Balto (1995)                                                    & Animation\\textbar{}Children                         \\\\\n","\t NA & Nixon (1995)                                                    & Drama                                      \\\\\n","\t NA & Cutthroat Island (1995)                                         & Action\\textbar{}Adventure\\textbar{}Romance                   \\\\\n","\t NA & Casino (1995)                                                   & Crime\\textbar{}Drama                                \\\\\n","\t NA & Sense and Sensibility (1995)                                    & Comedy\\textbar{}Drama\\textbar{}Romance                       \\\\\n","\t NA & Four Rooms (1995)                                               & Comedy\\textbar{}Drama\\textbar{}Thriller                      \\\\\n","\t NA & Ace Ventura: When Nature Calls (1995)                           & Comedy                                     \\\\\n","\t NA & Money Train (1995)                                              & Action\\textbar{}Comedy\\textbar{}Crime\\textbar{}Drama\\textbar{}Thriller         \\\\\n","\t NA & Get Shorty (1995)                                               & Action\\textbar{}Comedy\\textbar{}Drama                        \\\\\n","\t NA & Copycat (1995)                                                  & Crime\\textbar{}Drama\\textbar{}Horror\\textbar{}Mystery\\textbar{}Thriller        \\\\\n","\t NA & Assassins (1995)                                                & Action\\textbar{}Crime\\textbar{}Thriller                      \\\\\n","\t NA & Powder (1995)                                                   & Drama\\textbar{}Sci-Fi                               \\\\\n","\t NA & Leaving Las Vegas (1995)                                        & Drama\\textbar{}Romance                              \\\\\n","\t NA & Othello (1995)                                                  & Drama                                      \\\\\n","\t NA & Now and Then (1995)                                             & Drama                                      \\\\\n","\t NA & Persuasion (1995)                                               & Drama\\textbar{}Romance                              \\\\\n","\t NA & City of Lost Children, The (Cité des enfants perdus, La) (1995) & Adventure\\textbar{}Drama\\textbar{}Fantasy\\textbar{}Mystery\\textbar{}Sci-Fi     \\\\\n","\t NA & Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)            & Crime\\textbar{}Drama                                \\\\\n","\t ⋮ & ⋮ & ⋮\\\\\n","\t NA & Battle of Britain, The (Why We Fight, 4) (1943)          & Documentary\\textbar{}War              \\\\\n","\t NA & Small Cuts (Petites coupures) (2003)                     & Drama\\textbar{}Romance                \\\\\n","\t NA & Arabian Nights (1942)                                    & Action\\textbar{}Adventure             \\\\\n","\t NA & Blackbird, The (1926)                                    & Crime\\textbar{}Drama                  \\\\\n","\t NA & Battle of Russia, The (Why We Fight, 5) (1943)           & Documentary\\textbar{}War              \\\\\n","\t NA & More the Merrier, The (1943)                             & Comedy\\textbar{}Romance               \\\\\n","\t NA & Tuya's Marriage (Tuya de hun shi) (2006)                 & Drama\\textbar{}Romance                \\\\\n","\t NA & Face of a Fugitive (1959)                                & Western                      \\\\\n","\t NA & Dirty Dozen, The: The Fatal Mission (1988)               & Action\\textbar{}Adventure\\textbar{}War         \\\\\n","\t NA & Curious Case of Benjamin Button, The (2008)              & Drama\\textbar{}Fantasy\\textbar{}Mystery\\textbar{}Romance\\\\\n","\t NA & Divide and Conquer (Why We Fight, 3) (1943)              & Documentary\\textbar{}War              \\\\\n","\t NA & Yes Man (2008)                                           & Comedy                       \\\\\n","\t NA & Hexed (1993)                                             & Comedy                       \\\\\n","\t NA & Valkyrie (2008)                                          & Drama\\textbar{}Thriller\\textbar{}War           \\\\\n","\t NA & Birds of America (2008)                                  & Comedy\\textbar{}Drama                 \\\\\n","\t NA & Pete Seeger: The Power of Song (2007)                    & Documentary                  \\\\\n","\t NA & 5 Centimeters per Second (Byôsoku 5 senchimêtoru) (2007) & Animation\\textbar{}Drama\\textbar{}Romance      \\\\\n","\t NA & War of the Worlds (2005)                                 & Action                       \\\\\n","\t NA & War of the Worlds 2: The Next Wave (2008)                & Action                       \\\\\n","\t NA & Constantine's Sword (2007)                               & Documentary                  \\\\\n","\t NA & Impulse (2008)                                           & Mystery\\textbar{}Thriller             \\\\\n","\t NA & Zona Zamfirova (2002)                                    & Comedy\\textbar{}Drama                 \\\\\n","\t NA & Double Dynamite (1951)                                   & Comedy\\textbar{}Musical               \\\\\n","\t NA & Death Kiss, The (1933)                                   & Comedy\\textbar{}Mystery               \\\\\n","\t NA & Ben X (2007)                                             & Drama                        \\\\\n","\t NA & Bedtime Stories (2008)                                   & Adventure\\textbar{}Children\\textbar{}Comedy    \\\\\n","\t NA & Manhattan Melodrama (1934)                               & Crime\\textbar{}Drama\\textbar{}Romance          \\\\\n","\t NA & Choke (2008)                                             & Comedy\\textbar{}Drama                 \\\\\n","\t NA & Revolutionary Road (2008)                                & Drama\\textbar{}Romance                \\\\\n","\t NA & Blackadder Back \\& Forth (1999)                           & Comedy                       \\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.frame: 10681 × 3\n","\n","| movieId &lt;dbl&gt; | title &lt;chr&gt; | genres &lt;chr&gt; |\n","|---|---|---|\n","| NA | Toy Story (1995)                                                | Adventure|Animation|Children|Comedy|Fantasy |\n","| NA | Jumanji (1995)                                                  | Adventure|Children|Fantasy                  |\n","| NA | Grumpier Old Men (1995)                                         | Comedy|Romance                              |\n","| NA | Waiting to Exhale (1995)                                        | Comedy|Drama|Romance                        |\n","| NA | Father of the Bride Part II (1995)                              | Comedy                                      |\n","| NA | Heat (1995)                                                     | Action|Crime|Thriller                       |\n","| NA | Sabrina (1995)                                                  | Comedy|Romance                              |\n","| NA | Tom and Huck (1995)                                             | Adventure|Children                          |\n","| NA | Sudden Death (1995)                                             | Action                                      |\n","| NA | GoldenEye (1995)                                                | Action|Adventure|Thriller                   |\n","| NA | American President, The (1995)                                  | Comedy|Drama|Romance                        |\n","| NA | Dracula: Dead and Loving It (1995)                              | Comedy|Horror                               |\n","| NA | Balto (1995)                                                    | Animation|Children                          |\n","| NA | Nixon (1995)                                                    | Drama                                       |\n","| NA | Cutthroat Island (1995)                                         | Action|Adventure|Romance                    |\n","| NA | Casino (1995)                                                   | Crime|Drama                                 |\n","| NA | Sense and Sensibility (1995)                                    | Comedy|Drama|Romance                        |\n","| NA | Four Rooms (1995)                                               | Comedy|Drama|Thriller                       |\n","| NA | Ace Ventura: When Nature Calls (1995)                           | Comedy                                      |\n","| NA | Money Train (1995)                                              | Action|Comedy|Crime|Drama|Thriller          |\n","| NA | Get Shorty (1995)                                               | Action|Comedy|Drama                         |\n","| NA | Copycat (1995)                                                  | Crime|Drama|Horror|Mystery|Thriller         |\n","| NA | Assassins (1995)                                                | Action|Crime|Thriller                       |\n","| NA | Powder (1995)                                                   | Drama|Sci-Fi                                |\n","| NA | Leaving Las Vegas (1995)                                        | Drama|Romance                               |\n","| NA | Othello (1995)                                                  | Drama                                       |\n","| NA | Now and Then (1995)                                             | Drama                                       |\n","| NA | Persuasion (1995)                                               | Drama|Romance                               |\n","| NA | City of Lost Children, The (Cité des enfants perdus, La) (1995) | Adventure|Drama|Fantasy|Mystery|Sci-Fi      |\n","| NA | Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)            | Crime|Drama                                 |\n","| ⋮ | ⋮ | ⋮ |\n","| NA | Battle of Britain, The (Why We Fight, 4) (1943)          | Documentary|War               |\n","| NA | Small Cuts (Petites coupures) (2003)                     | Drama|Romance                 |\n","| NA | Arabian Nights (1942)                                    | Action|Adventure              |\n","| NA | Blackbird, The (1926)                                    | Crime|Drama                   |\n","| NA | Battle of Russia, The (Why We Fight, 5) (1943)           | Documentary|War               |\n","| NA | More the Merrier, The (1943)                             | Comedy|Romance                |\n","| NA | Tuya's Marriage (Tuya de hun shi) (2006)                 | Drama|Romance                 |\n","| NA | Face of a Fugitive (1959)                                | Western                       |\n","| NA | Dirty Dozen, The: The Fatal Mission (1988)               | Action|Adventure|War          |\n","| NA | Curious Case of Benjamin Button, The (2008)              | Drama|Fantasy|Mystery|Romance |\n","| NA | Divide and Conquer (Why We Fight, 3) (1943)              | Documentary|War               |\n","| NA | Yes Man (2008)                                           | Comedy                        |\n","| NA | Hexed (1993)                                             | Comedy                        |\n","| NA | Valkyrie (2008)                                          | Drama|Thriller|War            |\n","| NA | Birds of America (2008)                                  | Comedy|Drama                  |\n","| NA | Pete Seeger: The Power of Song (2007)                    | Documentary                   |\n","| NA | 5 Centimeters per Second (Byôsoku 5 senchimêtoru) (2007) | Animation|Drama|Romance       |\n","| NA | War of the Worlds (2005)                                 | Action                        |\n","| NA | War of the Worlds 2: The Next Wave (2008)                | Action                        |\n","| NA | Constantine's Sword (2007)                               | Documentary                   |\n","| NA | Impulse (2008)                                           | Mystery|Thriller              |\n","| NA | Zona Zamfirova (2002)                                    | Comedy|Drama                  |\n","| NA | Double Dynamite (1951)                                   | Comedy|Musical                |\n","| NA | Death Kiss, The (1933)                                   | Comedy|Mystery                |\n","| NA | Ben X (2007)                                             | Drama                         |\n","| NA | Bedtime Stories (2008)                                   | Adventure|Children|Comedy     |\n","| NA | Manhattan Melodrama (1934)                               | Crime|Drama|Romance           |\n","| NA | Choke (2008)                                             | Comedy|Drama                  |\n","| NA | Revolutionary Road (2008)                                | Drama|Romance                 |\n","| NA | Blackadder Back &amp; Forth (1999)                           | Comedy                        |\n","\n"],"text/plain":["      movieId title                                                          \n","1     NA      Toy Story (1995)                                               \n","2     NA      Jumanji (1995)                                                 \n","3     NA      Grumpier Old Men (1995)                                        \n","4     NA      Waiting to Exhale (1995)                                       \n","5     NA      Father of the Bride Part II (1995)                             \n","6     NA      Heat (1995)                                                    \n","7     NA      Sabrina (1995)                                                 \n","8     NA      Tom and Huck (1995)                                            \n","9     NA      Sudden Death (1995)                                            \n","10    NA      GoldenEye (1995)                                               \n","11    NA      American President, The (1995)                                 \n","12    NA      Dracula: Dead and Loving It (1995)                             \n","13    NA      Balto (1995)                                                   \n","14    NA      Nixon (1995)                                                   \n","15    NA      Cutthroat Island (1995)                                        \n","16    NA      Casino (1995)                                                  \n","17    NA      Sense and Sensibility (1995)                                   \n","18    NA      Four Rooms (1995)                                              \n","19    NA      Ace Ventura: When Nature Calls (1995)                          \n","20    NA      Money Train (1995)                                             \n","21    NA      Get Shorty (1995)                                              \n","22    NA      Copycat (1995)                                                 \n","23    NA      Assassins (1995)                                               \n","24    NA      Powder (1995)                                                  \n","25    NA      Leaving Las Vegas (1995)                                       \n","26    NA      Othello (1995)                                                 \n","27    NA      Now and Then (1995)                                            \n","28    NA      Persuasion (1995)                                              \n","29    NA      City of Lost Children, The (Cité des enfants perdus, La) (1995)\n","30    NA      Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)           \n","⋮     ⋮       ⋮                                                              \n","10652 NA      Battle of Britain, The (Why We Fight, 4) (1943)                \n","10653 NA      Small Cuts (Petites coupures) (2003)                           \n","10654 NA      Arabian Nights (1942)                                          \n","10655 NA      Blackbird, The (1926)                                          \n","10656 NA      Battle of Russia, The (Why We Fight, 5) (1943)                 \n","10657 NA      More the Merrier, The (1943)                                   \n","10658 NA      Tuya's Marriage (Tuya de hun shi) (2006)                       \n","10659 NA      Face of a Fugitive (1959)                                      \n","10660 NA      Dirty Dozen, The: The Fatal Mission (1988)                     \n","10661 NA      Curious Case of Benjamin Button, The (2008)                    \n","10662 NA      Divide and Conquer (Why We Fight, 3) (1943)                    \n","10663 NA      Yes Man (2008)                                                 \n","10664 NA      Hexed (1993)                                                   \n","10665 NA      Valkyrie (2008)                                                \n","10666 NA      Birds of America (2008)                                        \n","10667 NA      Pete Seeger: The Power of Song (2007)                          \n","10668 NA      5 Centimeters per Second (Byôsoku 5 senchimêtoru) (2007)       \n","10669 NA      War of the Worlds (2005)                                       \n","10670 NA      War of the Worlds 2: The Next Wave (2008)                      \n","10671 NA      Constantine's Sword (2007)                                     \n","10672 NA      Impulse (2008)                                                 \n","10673 NA      Zona Zamfirova (2002)                                          \n","10674 NA      Double Dynamite (1951)                                         \n","10675 NA      Death Kiss, The (1933)                                         \n","10676 NA      Ben X (2007)                                                   \n","10677 NA      Bedtime Stories (2008)                                         \n","10678 NA      Manhattan Melodrama (1934)                                     \n","10679 NA      Choke (2008)                                                   \n","10680 NA      Revolutionary Road (2008)                                      \n","10681 NA      Blackadder Back & Forth (1999)                                 \n","      genres                                     \n","1     Adventure|Animation|Children|Comedy|Fantasy\n","2     Adventure|Children|Fantasy                 \n","3     Comedy|Romance                             \n","4     Comedy|Drama|Romance                       \n","5     Comedy                                     \n","6     Action|Crime|Thriller                      \n","7     Comedy|Romance                             \n","8     Adventure|Children                         \n","9     Action                                     \n","10    Action|Adventure|Thriller                  \n","11    Comedy|Drama|Romance                       \n","12    Comedy|Horror                              \n","13    Animation|Children                         \n","14    Drama                                      \n","15    Action|Adventure|Romance                   \n","16    Crime|Drama                                \n","17    Comedy|Drama|Romance                       \n","18    Comedy|Drama|Thriller                      \n","19    Comedy                                     \n","20    Action|Comedy|Crime|Drama|Thriller         \n","21    Action|Comedy|Drama                        \n","22    Crime|Drama|Horror|Mystery|Thriller        \n","23    Action|Crime|Thriller                      \n","24    Drama|Sci-Fi                               \n","25    Drama|Romance                              \n","26    Drama                                      \n","27    Drama                                      \n","28    Drama|Romance                              \n","29    Adventure|Drama|Fantasy|Mystery|Sci-Fi     \n","30    Crime|Drama                                \n","⋮     ⋮                                          \n","10652 Documentary|War                            \n","10653 Drama|Romance                              \n","10654 Action|Adventure                           \n","10655 Crime|Drama                                \n","10656 Documentary|War                            \n","10657 Comedy|Romance                             \n","10658 Drama|Romance                              \n","10659 Western                                    \n","10660 Action|Adventure|War                       \n","10661 Drama|Fantasy|Mystery|Romance              \n","10662 Documentary|War                            \n","10663 Comedy                                     \n","10664 Comedy                                     \n","10665 Drama|Thriller|War                         \n","10666 Comedy|Drama                               \n","10667 Documentary                                \n","10668 Animation|Drama|Romance                    \n","10669 Action                                     \n","10670 Action                                     \n","10671 Documentary                                \n","10672 Mystery|Thriller                           \n","10673 Comedy|Drama                               \n","10674 Comedy|Musical                             \n","10675 Comedy|Mystery                             \n","10676 Drama                                      \n","10677 Adventure|Children|Comedy                  \n","10678 Crime|Drama|Romance                        \n","10679 Comedy|Drama                               \n","10680 Drama|Romance                              \n","10681 Comedy                                     "]},"metadata":{},"output_type":"display_data"}],"source":["movies"]},{"cell_type":"code","execution_count":7,"id":"b6faab5c","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:26.823485Z","iopub.status.busy":"2023-02-11T09:19:26.821632Z","iopub.status.idle":"2023-02-11T09:19:34.192723Z","shell.execute_reply":"2023-02-11T09:19:34.190738Z"},"papermill":{"duration":7.38527,"end_time":"2023-02-11T09:19:34.195535","exception":false,"start_time":"2023-02-11T09:19:26.810265","status":"completed"},"tags":[]},"outputs":[],"source":["movielens <- left_join(ratings, movies, by = \"movieId\")"]},{"cell_type":"code","execution_count":8,"id":"6205ad37","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:34.217983Z","iopub.status.busy":"2023-02-11T09:19:34.216363Z","iopub.status.idle":"2023-02-11T09:19:34.716696Z","shell.execute_reply":"2023-02-11T09:19:34.71484Z"},"papermill":{"duration":0.514167,"end_time":"2023-02-11T09:19:34.719212","exception":false,"start_time":"2023-02-11T09:19:34.205045","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.table: 10000054 × 6</caption>\n","<thead>\n","\t<tr><th scope=col>userId</th><th scope=col>movieId</th><th scope=col>rating</th><th scope=col>timestamp</th><th scope=col>title</th><th scope=col>genres</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td>122</td><td>5</td><td>838985046</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>185</td><td>5</td><td>838983525</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>231</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>292</td><td>5</td><td>838983421</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>316</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>329</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>355</td><td>5</td><td>838984474</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>356</td><td>5</td><td>838983653</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>362</td><td>5</td><td>838984885</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>364</td><td>5</td><td>838983707</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>370</td><td>5</td><td>838984596</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>377</td><td>5</td><td>838983834</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>420</td><td>5</td><td>838983834</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>466</td><td>5</td><td>838984679</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>480</td><td>5</td><td>838983653</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>520</td><td>5</td><td>838984679</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>539</td><td>5</td><td>838984068</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>586</td><td>5</td><td>838984068</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>588</td><td>5</td><td>838983339</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>589</td><td>5</td><td>838983778</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>594</td><td>5</td><td>838984679</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>616</td><td>5</td><td>838984941</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>110</td><td>5</td><td>868245777</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>151</td><td>3</td><td>868246450</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>260</td><td>5</td><td>868244562</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>376</td><td>3</td><td>868245920</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>539</td><td>3</td><td>868246262</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>590</td><td>5</td><td>868245608</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>648</td><td>2</td><td>868244699</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>719</td><td>3</td><td>868246191</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>\n","\t<tr><td>71567</td><td>1396</td><td>3</td><td>912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1407</td><td>2</td><td>912578457</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1527</td><td>5</td><td>912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1580</td><td>3</td><td>912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1584</td><td>3</td><td>912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1598</td><td>2</td><td>912649143</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1690</td><td>3</td><td>912578406</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1717</td><td>1</td><td>912578457</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1721</td><td>4</td><td>912649271</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1748</td><td>3</td><td>912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1769</td><td>3</td><td>912649037</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1792</td><td>2</td><td>912649171</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1805</td><td>4</td><td>912649010</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1833</td><td>3</td><td>912649171</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1876</td><td>3</td><td>912580722</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1909</td><td>2</td><td>912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1917</td><td>4</td><td>912580787</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1920</td><td>4</td><td>912578247</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1982</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1983</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1984</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1985</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1986</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2012</td><td>3</td><td>912580722</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2028</td><td>5</td><td>912580344</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2107</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2126</td><td>2</td><td>912649143</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2294</td><td>5</td><td>912577968</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2338</td><td>2</td><td>912578016</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2384</td><td>2</td><td>912578173</td><td>NA</td><td>NA</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.table: 10000054 × 6\n","\\begin{tabular}{llllll}\n"," userId & movieId & rating & timestamp & title & genres\\\\\n"," <int> & <dbl> & <dbl> & <int> & <chr> & <chr>\\\\\n","\\hline\n","\t 1 & 122 & 5 & 838985046 & NA & NA\\\\\n","\t 1 & 185 & 5 & 838983525 & NA & NA\\\\\n","\t 1 & 231 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 292 & 5 & 838983421 & NA & NA\\\\\n","\t 1 & 316 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 329 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 355 & 5 & 838984474 & NA & NA\\\\\n","\t 1 & 356 & 5 & 838983653 & NA & NA\\\\\n","\t 1 & 362 & 5 & 838984885 & NA & NA\\\\\n","\t 1 & 364 & 5 & 838983707 & NA & NA\\\\\n","\t 1 & 370 & 5 & 838984596 & NA & NA\\\\\n","\t 1 & 377 & 5 & 838983834 & NA & NA\\\\\n","\t 1 & 420 & 5 & 838983834 & NA & NA\\\\\n","\t 1 & 466 & 5 & 838984679 & NA & NA\\\\\n","\t 1 & 480 & 5 & 838983653 & NA & NA\\\\\n","\t 1 & 520 & 5 & 838984679 & NA & NA\\\\\n","\t 1 & 539 & 5 & 838984068 & NA & NA\\\\\n","\t 1 & 586 & 5 & 838984068 & NA & NA\\\\\n","\t 1 & 588 & 5 & 838983339 & NA & NA\\\\\n","\t 1 & 589 & 5 & 838983778 & NA & NA\\\\\n","\t 1 & 594 & 5 & 838984679 & NA & NA\\\\\n","\t 1 & 616 & 5 & 838984941 & NA & NA\\\\\n","\t 2 & 110 & 5 & 868245777 & NA & NA\\\\\n","\t 2 & 151 & 3 & 868246450 & NA & NA\\\\\n","\t 2 & 260 & 5 & 868244562 & NA & NA\\\\\n","\t 2 & 376 & 3 & 868245920 & NA & NA\\\\\n","\t 2 & 539 & 3 & 868246262 & NA & NA\\\\\n","\t 2 & 590 & 5 & 868245608 & NA & NA\\\\\n","\t 2 & 648 & 2 & 868244699 & NA & NA\\\\\n","\t 2 & 719 & 3 & 868246191 & NA & NA\\\\\n","\t ⋮ & ⋮ & ⋮ & ⋮ & ⋮ & ⋮\\\\\n","\t 71567 & 1396 & 3 & 912580688 & NA & NA\\\\\n","\t 71567 & 1407 & 2 & 912578457 & NA & NA\\\\\n","\t 71567 & 1527 & 5 & 912580647 & NA & NA\\\\\n","\t 71567 & 1580 & 3 & 912580688 & NA & NA\\\\\n","\t 71567 & 1584 & 3 & 912580647 & NA & NA\\\\\n","\t 71567 & 1598 & 2 & 912649143 & NA & NA\\\\\n","\t 71567 & 1690 & 3 & 912578406 & NA & NA\\\\\n","\t 71567 & 1717 & 1 & 912578457 & NA & NA\\\\\n","\t 71567 & 1721 & 4 & 912649271 & NA & NA\\\\\n","\t 71567 & 1748 & 3 & 912580647 & NA & NA\\\\\n","\t 71567 & 1769 & 3 & 912649037 & NA & NA\\\\\n","\t 71567 & 1792 & 2 & 912649171 & NA & NA\\\\\n","\t 71567 & 1805 & 4 & 912649010 & NA & NA\\\\\n","\t 71567 & 1833 & 3 & 912649171 & NA & NA\\\\\n","\t 71567 & 1876 & 3 & 912580722 & NA & NA\\\\\n","\t 71567 & 1909 & 2 & 912580688 & NA & NA\\\\\n","\t 71567 & 1917 & 4 & 912580787 & NA & NA\\\\\n","\t 71567 & 1920 & 4 & 912578247 & NA & NA\\\\\n","\t 71567 & 1982 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1983 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1984 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1985 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1986 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 2012 & 3 & 912580722 & NA & NA\\\\\n","\t 71567 & 2028 & 5 & 912580344 & NA & NA\\\\\n","\t 71567 & 2107 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 2126 & 2 & 912649143 & NA & NA\\\\\n","\t 71567 & 2294 & 5 & 912577968 & NA & NA\\\\\n","\t 71567 & 2338 & 2 & 912578016 & NA & NA\\\\\n","\t 71567 & 2384 & 2 & 912578173 & NA & NA\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.table: 10000054 × 6\n","\n","| userId &lt;int&gt; | movieId &lt;dbl&gt; | rating &lt;dbl&gt; | timestamp &lt;int&gt; | title &lt;chr&gt; | genres &lt;chr&gt; |\n","|---|---|---|---|---|---|\n","| 1 | 122 | 5 | 838985046 | NA | NA |\n","| 1 | 185 | 5 | 838983525 | NA | NA |\n","| 1 | 231 | 5 | 838983392 | NA | NA |\n","| 1 | 292 | 5 | 838983421 | NA | NA |\n","| 1 | 316 | 5 | 838983392 | NA | NA |\n","| 1 | 329 | 5 | 838983392 | NA | NA |\n","| 1 | 355 | 5 | 838984474 | NA | NA |\n","| 1 | 356 | 5 | 838983653 | NA | NA |\n","| 1 | 362 | 5 | 838984885 | NA | NA |\n","| 1 | 364 | 5 | 838983707 | NA | NA |\n","| 1 | 370 | 5 | 838984596 | NA | NA |\n","| 1 | 377 | 5 | 838983834 | NA | NA |\n","| 1 | 420 | 5 | 838983834 | NA | NA |\n","| 1 | 466 | 5 | 838984679 | NA | NA |\n","| 1 | 480 | 5 | 838983653 | NA | NA |\n","| 1 | 520 | 5 | 838984679 | NA | NA |\n","| 1 | 539 | 5 | 838984068 | NA | NA |\n","| 1 | 586 | 5 | 838984068 | NA | NA |\n","| 1 | 588 | 5 | 838983339 | NA | NA |\n","| 1 | 589 | 5 | 838983778 | NA | NA |\n","| 1 | 594 | 5 | 838984679 | NA | NA |\n","| 1 | 616 | 5 | 838984941 | NA | NA |\n","| 2 | 110 | 5 | 868245777 | NA | NA |\n","| 2 | 151 | 3 | 868246450 | NA | NA |\n","| 2 | 260 | 5 | 868244562 | NA | NA |\n","| 2 | 376 | 3 | 868245920 | NA | NA |\n","| 2 | 539 | 3 | 868246262 | NA | NA |\n","| 2 | 590 | 5 | 868245608 | NA | NA |\n","| 2 | 648 | 2 | 868244699 | NA | NA |\n","| 2 | 719 | 3 | 868246191 | NA | NA |\n","| ⋮ | ⋮ | ⋮ | ⋮ | ⋮ | ⋮ |\n","| 71567 | 1396 | 3 | 912580688 | NA | NA |\n","| 71567 | 1407 | 2 | 912578457 | NA | NA |\n","| 71567 | 1527 | 5 | 912580647 | NA | NA |\n","| 71567 | 1580 | 3 | 912580688 | NA | NA |\n","| 71567 | 1584 | 3 | 912580647 | NA | NA |\n","| 71567 | 1598 | 2 | 912649143 | NA | NA |\n","| 71567 | 1690 | 3 | 912578406 | NA | NA |\n","| 71567 | 1717 | 1 | 912578457 | NA | NA |\n","| 71567 | 1721 | 4 | 912649271 | NA | NA |\n","| 71567 | 1748 | 3 | 912580647 | NA | NA |\n","| 71567 | 1769 | 3 | 912649037 | NA | NA |\n","| 71567 | 1792 | 2 | 912649171 | NA | NA |\n","| 71567 | 1805 | 4 | 912649010 | NA | NA |\n","| 71567 | 1833 | 3 | 912649171 | NA | NA |\n","| 71567 | 1876 | 3 | 912580722 | NA | NA |\n","| 71567 | 1909 | 2 | 912580688 | NA | NA |\n","| 71567 | 1917 | 4 | 912580787 | NA | NA |\n","| 71567 | 1920 | 4 | 912578247 | NA | NA |\n","| 71567 | 1982 | 1 | 912580553 | NA | NA |\n","| 71567 | 1983 | 1 | 912580553 | NA | NA |\n","| 71567 | 1984 | 1 | 912580553 | NA | NA |\n","| 71567 | 1985 | 1 | 912580553 | NA | NA |\n","| 71567 | 1986 | 1 | 912580553 | NA | NA |\n","| 71567 | 2012 | 3 | 912580722 | NA | NA |\n","| 71567 | 2028 | 5 | 912580344 | NA | NA |\n","| 71567 | 2107 | 1 | 912580553 | NA | NA |\n","| 71567 | 2126 | 2 | 912649143 | NA | NA |\n","| 71567 | 2294 | 5 | 912577968 | NA | NA |\n","| 71567 | 2338 | 2 | 912578016 | NA | NA |\n","| 71567 | 2384 | 2 | 912578173 | NA | NA |\n","\n"],"text/plain":["         userId movieId rating timestamp title genres\n","1        1      122     5      838985046 NA    NA    \n","2        1      185     5      838983525 NA    NA    \n","3        1      231     5      838983392 NA    NA    \n","4        1      292     5      838983421 NA    NA    \n","5        1      316     5      838983392 NA    NA    \n","6        1      329     5      838983392 NA    NA    \n","7        1      355     5      838984474 NA    NA    \n","8        1      356     5      838983653 NA    NA    \n","9        1      362     5      838984885 NA    NA    \n","10       1      364     5      838983707 NA    NA    \n","11       1      370     5      838984596 NA    NA    \n","12       1      377     5      838983834 NA    NA    \n","13       1      420     5      838983834 NA    NA    \n","14       1      466     5      838984679 NA    NA    \n","15       1      480     5      838983653 NA    NA    \n","16       1      520     5      838984679 NA    NA    \n","17       1      539     5      838984068 NA    NA    \n","18       1      586     5      838984068 NA    NA    \n","19       1      588     5      838983339 NA    NA    \n","20       1      589     5      838983778 NA    NA    \n","21       1      594     5      838984679 NA    NA    \n","22       1      616     5      838984941 NA    NA    \n","23       2      110     5      868245777 NA    NA    \n","24       2      151     3      868246450 NA    NA    \n","25       2      260     5      868244562 NA    NA    \n","26       2      376     3      868245920 NA    NA    \n","27       2      539     3      868246262 NA    NA    \n","28       2      590     5      868245608 NA    NA    \n","29       2      648     2      868244699 NA    NA    \n","30       2      719     3      868246191 NA    NA    \n","⋮        ⋮      ⋮       ⋮      ⋮         ⋮     ⋮     \n","10000025 71567  1396    3      912580688 NA    NA    \n","10000026 71567  1407    2      912578457 NA    NA    \n","10000027 71567  1527    5      912580647 NA    NA    \n","10000028 71567  1580    3      912580688 NA    NA    \n","10000029 71567  1584    3      912580647 NA    NA    \n","10000030 71567  1598    2      912649143 NA    NA    \n","10000031 71567  1690    3      912578406 NA    NA    \n","10000032 71567  1717    1      912578457 NA    NA    \n","10000033 71567  1721    4      912649271 NA    NA    \n","10000034 71567  1748    3      912580647 NA    NA    \n","10000035 71567  1769    3      912649037 NA    NA    \n","10000036 71567  1792    2      912649171 NA    NA    \n","10000037 71567  1805    4      912649010 NA    NA    \n","10000038 71567  1833    3      912649171 NA    NA    \n","10000039 71567  1876    3      912580722 NA    NA    \n","10000040 71567  1909    2      912580688 NA    NA    \n","10000041 71567  1917    4      912580787 NA    NA    \n","10000042 71567  1920    4      912578247 NA    NA    \n","10000043 71567  1982    1      912580553 NA    NA    \n","10000044 71567  1983    1      912580553 NA    NA    \n","10000045 71567  1984    1      912580553 NA    NA    \n","10000046 71567  1985    1      912580553 NA    NA    \n","10000047 71567  1986    1      912580553 NA    NA    \n","10000048 71567  2012    3      912580722 NA    NA    \n","10000049 71567  2028    5      912580344 NA    NA    \n","10000050 71567  2107    1      912580553 NA    NA    \n","10000051 71567  2126    2      912649143 NA    NA    \n","10000052 71567  2294    5      912577968 NA    NA    \n","10000053 71567  2338    2      912578016 NA    NA    \n","10000054 71567  2384    2      912578173 NA    NA    "]},"metadata":{},"output_type":"display_data"}],"source":["movielens"]},{"cell_type":"code","execution_count":9,"id":"3bd2a8e1","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:34.743464Z","iopub.status.busy":"2023-02-11T09:19:34.741689Z","iopub.status.idle":"2023-02-11T09:19:39.833553Z","shell.execute_reply":"2023-02-11T09:19:39.831465Z"},"papermill":{"duration":5.107934,"end_time":"2023-02-11T09:19:39.837477","exception":false,"start_time":"2023-02-11T09:19:34.729543","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'Mersenne-Twister'</li><li>'Inversion'</li><li>'Rejection'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'Mersenne-Twister'\n","\\item 'Inversion'\n","\\item 'Rejection'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'Mersenne-Twister'\n","2. 'Inversion'\n","3. 'Rejection'\n","\n","\n"],"text/plain":["[1] \"Mersenne-Twister\" \"Inversion\"        \"Rejection\"       "]},"metadata":{},"output_type":"display_data"}],"source":["# 'Validation' set will be 10% of MovieLens data\n","# set.seed(1, sample.kind=\"Rounding\")\n","RNGkind()  # RNGkind is an interface to query or set the kind of RNG(random number generator) in use.\n","set.seed(1234)\n","\n","test_index <- createDataPartition(y = movielens$rating, \n","                                  times = 1, p = 0.1, list = FALSE)\n","edx <- movielens[-test_index,]\n","temp <- movielens[test_index,]"]},{"cell_type":"code","execution_count":10,"id":"ea5c72a5","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:39.86247Z","iopub.status.busy":"2023-02-11T09:19:39.860623Z","iopub.status.idle":"2023-02-11T09:19:40.042311Z","shell.execute_reply":"2023-02-11T09:19:40.0394Z"},"papermill":{"duration":0.198048,"end_time":"2023-02-11T09:19:40.04553","exception":false,"start_time":"2023-02-11T09:19:39.847482","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.table: 9000047 × 6</caption>\n","<thead>\n","\t<tr><th scope=col>userId</th><th scope=col>movieId</th><th scope=col>rating</th><th scope=col>timestamp</th><th scope=col>title</th><th scope=col>genres</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td>122</td><td>5</td><td>838985046</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>185</td><td>5</td><td>838983525</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>231</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>292</td><td>5</td><td>838983421</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>316</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>355</td><td>5</td><td>838984474</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>362</td><td>5</td><td>838984885</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>364</td><td>5</td><td>838983707</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>370</td><td>5</td><td>838984596</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>377</td><td>5</td><td>838983834</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>420</td><td>5</td><td>838983834</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>466</td><td>5</td><td>838984679</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>480</td><td>5</td><td>838983653</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>520</td><td>5</td><td>838984679</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>539</td><td>5</td><td>838984068</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>586</td><td>5</td><td>838984068</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>588</td><td>5</td><td>838983339</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>589</td><td>5</td><td>838983778</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>594</td><td>5</td><td>838984679</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>110</td><td>5</td><td>868245777</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>151</td><td>3</td><td>868246450</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>260</td><td>5</td><td>868244562</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>376</td><td>3</td><td>868245920</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>539</td><td>3</td><td>868246262</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>590</td><td>5</td><td>868245608</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>648</td><td>2</td><td>868244699</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>719</td><td>3</td><td>868246191</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>733</td><td>3</td><td>868244562</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>736</td><td>3</td><td>868244698</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>780</td><td>3</td><td>868244698</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>\n","\t<tr><td>71567</td><td>1200</td><td>5</td><td>912578406</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1210</td><td>4</td><td>912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1214</td><td>5</td><td>912578406</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1320</td><td>4</td><td>912578406</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1356</td><td>5</td><td>912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1391</td><td>4</td><td>912580753</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1396</td><td>3</td><td>912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1407</td><td>2</td><td>912578457</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1527</td><td>5</td><td>912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1580</td><td>3</td><td>912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1584</td><td>3</td><td>912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1598</td><td>2</td><td>912649143</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1690</td><td>3</td><td>912578406</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1717</td><td>1</td><td>912578457</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1769</td><td>3</td><td>912649037</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1792</td><td>2</td><td>912649171</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1805</td><td>4</td><td>912649010</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1833</td><td>3</td><td>912649171</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1876</td><td>3</td><td>912580722</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1917</td><td>4</td><td>912580787</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1920</td><td>4</td><td>912578247</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1982</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1983</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1984</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1986</td><td>1</td><td>912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2012</td><td>3</td><td>912580722</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2028</td><td>5</td><td>912580344</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2126</td><td>2</td><td>912649143</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2294</td><td>5</td><td>912577968</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2384</td><td>2</td><td>912578173</td><td>NA</td><td>NA</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.table: 9000047 × 6\n","\\begin{tabular}{llllll}\n"," userId & movieId & rating & timestamp & title & genres\\\\\n"," <int> & <dbl> & <dbl> & <int> & <chr> & <chr>\\\\\n","\\hline\n","\t 1 & 122 & 5 & 838985046 & NA & NA\\\\\n","\t 1 & 185 & 5 & 838983525 & NA & NA\\\\\n","\t 1 & 231 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 292 & 5 & 838983421 & NA & NA\\\\\n","\t 1 & 316 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 355 & 5 & 838984474 & NA & NA\\\\\n","\t 1 & 362 & 5 & 838984885 & NA & NA\\\\\n","\t 1 & 364 & 5 & 838983707 & NA & NA\\\\\n","\t 1 & 370 & 5 & 838984596 & NA & NA\\\\\n","\t 1 & 377 & 5 & 838983834 & NA & NA\\\\\n","\t 1 & 420 & 5 & 838983834 & NA & NA\\\\\n","\t 1 & 466 & 5 & 838984679 & NA & NA\\\\\n","\t 1 & 480 & 5 & 838983653 & NA & NA\\\\\n","\t 1 & 520 & 5 & 838984679 & NA & NA\\\\\n","\t 1 & 539 & 5 & 838984068 & NA & NA\\\\\n","\t 1 & 586 & 5 & 838984068 & NA & NA\\\\\n","\t 1 & 588 & 5 & 838983339 & NA & NA\\\\\n","\t 1 & 589 & 5 & 838983778 & NA & NA\\\\\n","\t 1 & 594 & 5 & 838984679 & NA & NA\\\\\n","\t 2 & 110 & 5 & 868245777 & NA & NA\\\\\n","\t 2 & 151 & 3 & 868246450 & NA & NA\\\\\n","\t 2 & 260 & 5 & 868244562 & NA & NA\\\\\n","\t 2 & 376 & 3 & 868245920 & NA & NA\\\\\n","\t 2 & 539 & 3 & 868246262 & NA & NA\\\\\n","\t 2 & 590 & 5 & 868245608 & NA & NA\\\\\n","\t 2 & 648 & 2 & 868244699 & NA & NA\\\\\n","\t 2 & 719 & 3 & 868246191 & NA & NA\\\\\n","\t 2 & 733 & 3 & 868244562 & NA & NA\\\\\n","\t 2 & 736 & 3 & 868244698 & NA & NA\\\\\n","\t 2 & 780 & 3 & 868244698 & NA & NA\\\\\n","\t ⋮ & ⋮ & ⋮ & ⋮ & ⋮ & ⋮\\\\\n","\t 71567 & 1200 & 5 & 912578406 & NA & NA\\\\\n","\t 71567 & 1210 & 4 & 912580647 & NA & NA\\\\\n","\t 71567 & 1214 & 5 & 912578406 & NA & NA\\\\\n","\t 71567 & 1320 & 4 & 912578406 & NA & NA\\\\\n","\t 71567 & 1356 & 5 & 912580688 & NA & NA\\\\\n","\t 71567 & 1391 & 4 & 912580753 & NA & NA\\\\\n","\t 71567 & 1396 & 3 & 912580688 & NA & NA\\\\\n","\t 71567 & 1407 & 2 & 912578457 & NA & NA\\\\\n","\t 71567 & 1527 & 5 & 912580647 & NA & NA\\\\\n","\t 71567 & 1580 & 3 & 912580688 & NA & NA\\\\\n","\t 71567 & 1584 & 3 & 912580647 & NA & NA\\\\\n","\t 71567 & 1598 & 2 & 912649143 & NA & NA\\\\\n","\t 71567 & 1690 & 3 & 912578406 & NA & NA\\\\\n","\t 71567 & 1717 & 1 & 912578457 & NA & NA\\\\\n","\t 71567 & 1769 & 3 & 912649037 & NA & NA\\\\\n","\t 71567 & 1792 & 2 & 912649171 & NA & NA\\\\\n","\t 71567 & 1805 & 4 & 912649010 & NA & NA\\\\\n","\t 71567 & 1833 & 3 & 912649171 & NA & NA\\\\\n","\t 71567 & 1876 & 3 & 912580722 & NA & NA\\\\\n","\t 71567 & 1917 & 4 & 912580787 & NA & NA\\\\\n","\t 71567 & 1920 & 4 & 912578247 & NA & NA\\\\\n","\t 71567 & 1982 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1983 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1984 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 1986 & 1 & 912580553 & NA & NA\\\\\n","\t 71567 & 2012 & 3 & 912580722 & NA & NA\\\\\n","\t 71567 & 2028 & 5 & 912580344 & NA & NA\\\\\n","\t 71567 & 2126 & 2 & 912649143 & NA & NA\\\\\n","\t 71567 & 2294 & 5 & 912577968 & NA & NA\\\\\n","\t 71567 & 2384 & 2 & 912578173 & NA & NA\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.table: 9000047 × 6\n","\n","| userId &lt;int&gt; | movieId &lt;dbl&gt; | rating &lt;dbl&gt; | timestamp &lt;int&gt; | title &lt;chr&gt; | genres &lt;chr&gt; |\n","|---|---|---|---|---|---|\n","| 1 | 122 | 5 | 838985046 | NA | NA |\n","| 1 | 185 | 5 | 838983525 | NA | NA |\n","| 1 | 231 | 5 | 838983392 | NA | NA |\n","| 1 | 292 | 5 | 838983421 | NA | NA |\n","| 1 | 316 | 5 | 838983392 | NA | NA |\n","| 1 | 355 | 5 | 838984474 | NA | NA |\n","| 1 | 362 | 5 | 838984885 | NA | NA |\n","| 1 | 364 | 5 | 838983707 | NA | NA |\n","| 1 | 370 | 5 | 838984596 | NA | NA |\n","| 1 | 377 | 5 | 838983834 | NA | NA |\n","| 1 | 420 | 5 | 838983834 | NA | NA |\n","| 1 | 466 | 5 | 838984679 | NA | NA |\n","| 1 | 480 | 5 | 838983653 | NA | NA |\n","| 1 | 520 | 5 | 838984679 | NA | NA |\n","| 1 | 539 | 5 | 838984068 | NA | NA |\n","| 1 | 586 | 5 | 838984068 | NA | NA |\n","| 1 | 588 | 5 | 838983339 | NA | NA |\n","| 1 | 589 | 5 | 838983778 | NA | NA |\n","| 1 | 594 | 5 | 838984679 | NA | NA |\n","| 2 | 110 | 5 | 868245777 | NA | NA |\n","| 2 | 151 | 3 | 868246450 | NA | NA |\n","| 2 | 260 | 5 | 868244562 | NA | NA |\n","| 2 | 376 | 3 | 868245920 | NA | NA |\n","| 2 | 539 | 3 | 868246262 | NA | NA |\n","| 2 | 590 | 5 | 868245608 | NA | NA |\n","| 2 | 648 | 2 | 868244699 | NA | NA |\n","| 2 | 719 | 3 | 868246191 | NA | NA |\n","| 2 | 733 | 3 | 868244562 | NA | NA |\n","| 2 | 736 | 3 | 868244698 | NA | NA |\n","| 2 | 780 | 3 | 868244698 | NA | NA |\n","| ⋮ | ⋮ | ⋮ | ⋮ | ⋮ | ⋮ |\n","| 71567 | 1200 | 5 | 912578406 | NA | NA |\n","| 71567 | 1210 | 4 | 912580647 | NA | NA |\n","| 71567 | 1214 | 5 | 912578406 | NA | NA |\n","| 71567 | 1320 | 4 | 912578406 | NA | NA |\n","| 71567 | 1356 | 5 | 912580688 | NA | NA |\n","| 71567 | 1391 | 4 | 912580753 | NA | NA |\n","| 71567 | 1396 | 3 | 912580688 | NA | NA |\n","| 71567 | 1407 | 2 | 912578457 | NA | NA |\n","| 71567 | 1527 | 5 | 912580647 | NA | NA |\n","| 71567 | 1580 | 3 | 912580688 | NA | NA |\n","| 71567 | 1584 | 3 | 912580647 | NA | NA |\n","| 71567 | 1598 | 2 | 912649143 | NA | NA |\n","| 71567 | 1690 | 3 | 912578406 | NA | NA |\n","| 71567 | 1717 | 1 | 912578457 | NA | NA |\n","| 71567 | 1769 | 3 | 912649037 | NA | NA |\n","| 71567 | 1792 | 2 | 912649171 | NA | NA |\n","| 71567 | 1805 | 4 | 912649010 | NA | NA |\n","| 71567 | 1833 | 3 | 912649171 | NA | NA |\n","| 71567 | 1876 | 3 | 912580722 | NA | NA |\n","| 71567 | 1917 | 4 | 912580787 | NA | NA |\n","| 71567 | 1920 | 4 | 912578247 | NA | NA |\n","| 71567 | 1982 | 1 | 912580553 | NA | NA |\n","| 71567 | 1983 | 1 | 912580553 | NA | NA |\n","| 71567 | 1984 | 1 | 912580553 | NA | NA |\n","| 71567 | 1986 | 1 | 912580553 | NA | NA |\n","| 71567 | 2012 | 3 | 912580722 | NA | NA |\n","| 71567 | 2028 | 5 | 912580344 | NA | NA |\n","| 71567 | 2126 | 2 | 912649143 | NA | NA |\n","| 71567 | 2294 | 5 | 912577968 | NA | NA |\n","| 71567 | 2384 | 2 | 912578173 | NA | NA |\n","\n"],"text/plain":["        userId movieId rating timestamp title genres\n","1       1      122     5      838985046 NA    NA    \n","2       1      185     5      838983525 NA    NA    \n","3       1      231     5      838983392 NA    NA    \n","4       1      292     5      838983421 NA    NA    \n","5       1      316     5      838983392 NA    NA    \n","6       1      355     5      838984474 NA    NA    \n","7       1      362     5      838984885 NA    NA    \n","8       1      364     5      838983707 NA    NA    \n","9       1      370     5      838984596 NA    NA    \n","10      1      377     5      838983834 NA    NA    \n","11      1      420     5      838983834 NA    NA    \n","12      1      466     5      838984679 NA    NA    \n","13      1      480     5      838983653 NA    NA    \n","14      1      520     5      838984679 NA    NA    \n","15      1      539     5      838984068 NA    NA    \n","16      1      586     5      838984068 NA    NA    \n","17      1      588     5      838983339 NA    NA    \n","18      1      589     5      838983778 NA    NA    \n","19      1      594     5      838984679 NA    NA    \n","20      2      110     5      868245777 NA    NA    \n","21      2      151     3      868246450 NA    NA    \n","22      2      260     5      868244562 NA    NA    \n","23      2      376     3      868245920 NA    NA    \n","24      2      539     3      868246262 NA    NA    \n","25      2      590     5      868245608 NA    NA    \n","26      2      648     2      868244699 NA    NA    \n","27      2      719     3      868246191 NA    NA    \n","28      2      733     3      868244562 NA    NA    \n","29      2      736     3      868244698 NA    NA    \n","30      2      780     3      868244698 NA    NA    \n","⋮       ⋮      ⋮       ⋮      ⋮         ⋮     ⋮     \n","9000018 71567  1200    5      912578406 NA    NA    \n","9000019 71567  1210    4      912580647 NA    NA    \n","9000020 71567  1214    5      912578406 NA    NA    \n","9000021 71567  1320    4      912578406 NA    NA    \n","9000022 71567  1356    5      912580688 NA    NA    \n","9000023 71567  1391    4      912580753 NA    NA    \n","9000024 71567  1396    3      912580688 NA    NA    \n","9000025 71567  1407    2      912578457 NA    NA    \n","9000026 71567  1527    5      912580647 NA    NA    \n","9000027 71567  1580    3      912580688 NA    NA    \n","9000028 71567  1584    3      912580647 NA    NA    \n","9000029 71567  1598    2      912649143 NA    NA    \n","9000030 71567  1690    3      912578406 NA    NA    \n","9000031 71567  1717    1      912578457 NA    NA    \n","9000032 71567  1769    3      912649037 NA    NA    \n","9000033 71567  1792    2      912649171 NA    NA    \n","9000034 71567  1805    4      912649010 NA    NA    \n","9000035 71567  1833    3      912649171 NA    NA    \n","9000036 71567  1876    3      912580722 NA    NA    \n","9000037 71567  1917    4      912580787 NA    NA    \n","9000038 71567  1920    4      912578247 NA    NA    \n","9000039 71567  1982    1      912580553 NA    NA    \n","9000040 71567  1983    1      912580553 NA    NA    \n","9000041 71567  1984    1      912580553 NA    NA    \n","9000042 71567  1986    1      912580553 NA    NA    \n","9000043 71567  2012    3      912580722 NA    NA    \n","9000044 71567  2028    5      912580344 NA    NA    \n","9000045 71567  2126    2      912649143 NA    NA    \n","9000046 71567  2294    5      912577968 NA    NA    \n","9000047 71567  2384    2      912578173 NA    NA    "]},"metadata":{},"output_type":"display_data"}],"source":["edx"]},{"cell_type":"code","execution_count":11,"id":"0e9746b3","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:40.070301Z","iopub.status.busy":"2023-02-11T09:19:40.068555Z","iopub.status.idle":"2023-02-11T09:19:40.160299Z","shell.execute_reply":"2023-02-11T09:19:40.157486Z"},"papermill":{"duration":0.107396,"end_time":"2023-02-11T09:19:40.163348","exception":false,"start_time":"2023-02-11T09:19:40.055952","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.table: 1000007 × 6</caption>\n","<thead>\n","\t<tr><th scope=col>userId</th><th scope=col>movieId</th><th scope=col>rating</th><th scope=col>timestamp</th><th scope=col>title</th><th scope=col>genres</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td> 329</td><td>5.0</td><td> 838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td> 356</td><td>5.0</td><td> 838983653</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td> 616</td><td>5.0</td><td> 838984941</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td> 802</td><td>2.0</td><td> 868244603</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>1356</td><td>3.0</td><td> 868244603</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>1544</td><td>3.0</td><td> 868245920</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>3</td><td>1246</td><td>4.0</td><td>1133570967</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>3</td><td>7153</td><td>4.0</td><td>1133571171</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>3</td><td>8783</td><td>5.0</td><td>1136075857</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>4</td><td> 208</td><td>3.0</td><td> 844416866</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>4</td><td> 292</td><td>3.0</td><td> 844416796</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td>  85</td><td>3.0</td><td> 857912791</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 230</td><td>4.0</td><td> 857912441</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 348</td><td>4.0</td><td> 857912657</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 412</td><td>5.0</td><td> 857912441</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 446</td><td>5.0</td><td> 857912933</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 495</td><td>5.0</td><td> 857912792</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 535</td><td>3.0</td><td> 857912441</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 592</td><td>3.0</td><td> 857912657</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 923</td><td>5.0</td><td> 857912593</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td>1103</td><td>4.0</td><td> 857912968</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td>1172</td><td>4.0</td><td> 857913475</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>6</td><td>1277</td><td>5.0</td><td>1001083175</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>6</td><td>3623</td><td>3.0</td><td>1001083383</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1148</td><td>4.5</td><td>1054292370</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1196</td><td>4.0</td><td>1049820445</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1234</td><td>4.0</td><td>1050329550</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1254</td><td>5.0</td><td>1054292384</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1270</td><td>4.0</td><td>1049764409</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>2762</td><td>5.0</td><td>1050098559</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>\n","\t<tr><td>71563</td><td>5445</td><td>3.0</td><td>1162133834</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td> 678</td><td>4.0</td><td>1111545391</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>2146</td><td>3.0</td><td>1111545310</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>4571</td><td>2.5</td><td>1111545191</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>5445</td><td>3.5</td><td>1111544973</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>5945</td><td>1.0</td><td>1111546077</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>7193</td><td>4.0</td><td>1111545615</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td> 903</td><td>3.0</td><td> 974295666</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>1125</td><td>4.0</td><td> 974294786</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>1228</td><td>4.0</td><td> 974295277</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>1252</td><td>5.0</td><td> 974295156</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2394</td><td>3.0</td><td> 974294564</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2526</td><td>2.0</td><td> 974294975</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2622</td><td>4.0</td><td> 974294520</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2779</td><td>3.0</td><td> 974294760</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>3421</td><td>4.0</td><td> 974294692</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>3702</td><td>3.0</td><td> 974294884</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>3808</td><td>4.0</td><td> 974295467</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 125</td><td>4.0</td><td> 830341213</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 222</td><td>3.0</td><td> 830341118</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 232</td><td>4.0</td><td> 830341155</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 434</td><td>3.0</td><td> 830340953</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 590</td><td>4.0</td><td> 830340802</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td> 480</td><td>4.0</td><td> 912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1721</td><td>4.0</td><td> 912649271</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1748</td><td>3.0</td><td> 912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1909</td><td>2.0</td><td> 912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1985</td><td>1.0</td><td> 912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2107</td><td>1.0</td><td> 912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2338</td><td>2.0</td><td> 912578016</td><td>NA</td><td>NA</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.table: 1000007 × 6\n","\\begin{tabular}{llllll}\n"," userId & movieId & rating & timestamp & title & genres\\\\\n"," <int> & <dbl> & <dbl> & <int> & <chr> & <chr>\\\\\n","\\hline\n","\t 1 &  329 & 5.0 &  838983392 & NA & NA\\\\\n","\t 1 &  356 & 5.0 &  838983653 & NA & NA\\\\\n","\t 1 &  616 & 5.0 &  838984941 & NA & NA\\\\\n","\t 2 &  802 & 2.0 &  868244603 & NA & NA\\\\\n","\t 2 & 1356 & 3.0 &  868244603 & NA & NA\\\\\n","\t 2 & 1544 & 3.0 &  868245920 & NA & NA\\\\\n","\t 3 & 1246 & 4.0 & 1133570967 & NA & NA\\\\\n","\t 3 & 7153 & 4.0 & 1133571171 & NA & NA\\\\\n","\t 3 & 8783 & 5.0 & 1136075857 & NA & NA\\\\\n","\t 4 &  208 & 3.0 &  844416866 & NA & NA\\\\\n","\t 4 &  292 & 3.0 &  844416796 & NA & NA\\\\\n","\t 5 &   85 & 3.0 &  857912791 & NA & NA\\\\\n","\t 5 &  230 & 4.0 &  857912441 & NA & NA\\\\\n","\t 5 &  348 & 4.0 &  857912657 & NA & NA\\\\\n","\t 5 &  412 & 5.0 &  857912441 & NA & NA\\\\\n","\t 5 &  446 & 5.0 &  857912933 & NA & NA\\\\\n","\t 5 &  495 & 5.0 &  857912792 & NA & NA\\\\\n","\t 5 &  535 & 3.0 &  857912441 & NA & NA\\\\\n","\t 5 &  592 & 3.0 &  857912657 & NA & NA\\\\\n","\t 5 &  923 & 5.0 &  857912593 & NA & NA\\\\\n","\t 5 & 1103 & 4.0 &  857912968 & NA & NA\\\\\n","\t 5 & 1172 & 4.0 &  857913475 & NA & NA\\\\\n","\t 6 & 1277 & 5.0 & 1001083175 & NA & NA\\\\\n","\t 6 & 3623 & 3.0 & 1001083383 & NA & NA\\\\\n","\t 7 & 1148 & 4.5 & 1054292370 & NA & NA\\\\\n","\t 7 & 1196 & 4.0 & 1049820445 & NA & NA\\\\\n","\t 7 & 1234 & 4.0 & 1050329550 & NA & NA\\\\\n","\t 7 & 1254 & 5.0 & 1054292384 & NA & NA\\\\\n","\t 7 & 1270 & 4.0 & 1049764409 & NA & NA\\\\\n","\t 7 & 2762 & 5.0 & 1050098559 & NA & NA\\\\\n","\t ⋮ & ⋮ & ⋮ & ⋮ & ⋮ & ⋮\\\\\n","\t 71563 & 5445 & 3.0 & 1162133834 & NA & NA\\\\\n","\t 71564 &  678 & 4.0 & 1111545391 & NA & NA\\\\\n","\t 71564 & 2146 & 3.0 & 1111545310 & NA & NA\\\\\n","\t 71564 & 4571 & 2.5 & 1111545191 & NA & NA\\\\\n","\t 71564 & 5445 & 3.5 & 1111544973 & NA & NA\\\\\n","\t 71564 & 5945 & 1.0 & 1111546077 & NA & NA\\\\\n","\t 71564 & 7193 & 4.0 & 1111545615 & NA & NA\\\\\n","\t 71565 &  903 & 3.0 &  974295666 & NA & NA\\\\\n","\t 71565 & 1125 & 4.0 &  974294786 & NA & NA\\\\\n","\t 71565 & 1228 & 4.0 &  974295277 & NA & NA\\\\\n","\t 71565 & 1252 & 5.0 &  974295156 & NA & NA\\\\\n","\t 71565 & 2394 & 3.0 &  974294564 & NA & NA\\\\\n","\t 71565 & 2526 & 2.0 &  974294975 & NA & NA\\\\\n","\t 71565 & 2622 & 4.0 &  974294520 & NA & NA\\\\\n","\t 71565 & 2779 & 3.0 &  974294760 & NA & NA\\\\\n","\t 71565 & 3421 & 4.0 &  974294692 & NA & NA\\\\\n","\t 71565 & 3702 & 3.0 &  974294884 & NA & NA\\\\\n","\t 71565 & 3808 & 4.0 &  974295467 & NA & NA\\\\\n","\t 71566 &  125 & 4.0 &  830341213 & NA & NA\\\\\n","\t 71566 &  222 & 3.0 &  830341118 & NA & NA\\\\\n","\t 71566 &  232 & 4.0 &  830341155 & NA & NA\\\\\n","\t 71566 &  434 & 3.0 &  830340953 & NA & NA\\\\\n","\t 71566 &  590 & 4.0 &  830340802 & NA & NA\\\\\n","\t 71567 &  480 & 4.0 &  912580688 & NA & NA\\\\\n","\t 71567 & 1721 & 4.0 &  912649271 & NA & NA\\\\\n","\t 71567 & 1748 & 3.0 &  912580647 & NA & NA\\\\\n","\t 71567 & 1909 & 2.0 &  912580688 & NA & NA\\\\\n","\t 71567 & 1985 & 1.0 &  912580553 & NA & NA\\\\\n","\t 71567 & 2107 & 1.0 &  912580553 & NA & NA\\\\\n","\t 71567 & 2338 & 2.0 &  912578016 & NA & NA\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.table: 1000007 × 6\n","\n","| userId &lt;int&gt; | movieId &lt;dbl&gt; | rating &lt;dbl&gt; | timestamp &lt;int&gt; | title &lt;chr&gt; | genres &lt;chr&gt; |\n","|---|---|---|---|---|---|\n","| 1 |  329 | 5.0 |  838983392 | NA | NA |\n","| 1 |  356 | 5.0 |  838983653 | NA | NA |\n","| 1 |  616 | 5.0 |  838984941 | NA | NA |\n","| 2 |  802 | 2.0 |  868244603 | NA | NA |\n","| 2 | 1356 | 3.0 |  868244603 | NA | NA |\n","| 2 | 1544 | 3.0 |  868245920 | NA | NA |\n","| 3 | 1246 | 4.0 | 1133570967 | NA | NA |\n","| 3 | 7153 | 4.0 | 1133571171 | NA | NA |\n","| 3 | 8783 | 5.0 | 1136075857 | NA | NA |\n","| 4 |  208 | 3.0 |  844416866 | NA | NA |\n","| 4 |  292 | 3.0 |  844416796 | NA | NA |\n","| 5 |   85 | 3.0 |  857912791 | NA | NA |\n","| 5 |  230 | 4.0 |  857912441 | NA | NA |\n","| 5 |  348 | 4.0 |  857912657 | NA | NA |\n","| 5 |  412 | 5.0 |  857912441 | NA | NA |\n","| 5 |  446 | 5.0 |  857912933 | NA | NA |\n","| 5 |  495 | 5.0 |  857912792 | NA | NA |\n","| 5 |  535 | 3.0 |  857912441 | NA | NA |\n","| 5 |  592 | 3.0 |  857912657 | NA | NA |\n","| 5 |  923 | 5.0 |  857912593 | NA | NA |\n","| 5 | 1103 | 4.0 |  857912968 | NA | NA |\n","| 5 | 1172 | 4.0 |  857913475 | NA | NA |\n","| 6 | 1277 | 5.0 | 1001083175 | NA | NA |\n","| 6 | 3623 | 3.0 | 1001083383 | NA | NA |\n","| 7 | 1148 | 4.5 | 1054292370 | NA | NA |\n","| 7 | 1196 | 4.0 | 1049820445 | NA | NA |\n","| 7 | 1234 | 4.0 | 1050329550 | NA | NA |\n","| 7 | 1254 | 5.0 | 1054292384 | NA | NA |\n","| 7 | 1270 | 4.0 | 1049764409 | NA | NA |\n","| 7 | 2762 | 5.0 | 1050098559 | NA | NA |\n","| ⋮ | ⋮ | ⋮ | ⋮ | ⋮ | ⋮ |\n","| 71563 | 5445 | 3.0 | 1162133834 | NA | NA |\n","| 71564 |  678 | 4.0 | 1111545391 | NA | NA |\n","| 71564 | 2146 | 3.0 | 1111545310 | NA | NA |\n","| 71564 | 4571 | 2.5 | 1111545191 | NA | NA |\n","| 71564 | 5445 | 3.5 | 1111544973 | NA | NA |\n","| 71564 | 5945 | 1.0 | 1111546077 | NA | NA |\n","| 71564 | 7193 | 4.0 | 1111545615 | NA | NA |\n","| 71565 |  903 | 3.0 |  974295666 | NA | NA |\n","| 71565 | 1125 | 4.0 |  974294786 | NA | NA |\n","| 71565 | 1228 | 4.0 |  974295277 | NA | NA |\n","| 71565 | 1252 | 5.0 |  974295156 | NA | NA |\n","| 71565 | 2394 | 3.0 |  974294564 | NA | NA |\n","| 71565 | 2526 | 2.0 |  974294975 | NA | NA |\n","| 71565 | 2622 | 4.0 |  974294520 | NA | NA |\n","| 71565 | 2779 | 3.0 |  974294760 | NA | NA |\n","| 71565 | 3421 | 4.0 |  974294692 | NA | NA |\n","| 71565 | 3702 | 3.0 |  974294884 | NA | NA |\n","| 71565 | 3808 | 4.0 |  974295467 | NA | NA |\n","| 71566 |  125 | 4.0 |  830341213 | NA | NA |\n","| 71566 |  222 | 3.0 |  830341118 | NA | NA |\n","| 71566 |  232 | 4.0 |  830341155 | NA | NA |\n","| 71566 |  434 | 3.0 |  830340953 | NA | NA |\n","| 71566 |  590 | 4.0 |  830340802 | NA | NA |\n","| 71567 |  480 | 4.0 |  912580688 | NA | NA |\n","| 71567 | 1721 | 4.0 |  912649271 | NA | NA |\n","| 71567 | 1748 | 3.0 |  912580647 | NA | NA |\n","| 71567 | 1909 | 2.0 |  912580688 | NA | NA |\n","| 71567 | 1985 | 1.0 |  912580553 | NA | NA |\n","| 71567 | 2107 | 1.0 |  912580553 | NA | NA |\n","| 71567 | 2338 | 2.0 |  912578016 | NA | NA |\n","\n"],"text/plain":["        userId movieId rating timestamp  title genres\n","1       1       329    5.0     838983392 NA    NA    \n","2       1       356    5.0     838983653 NA    NA    \n","3       1       616    5.0     838984941 NA    NA    \n","4       2       802    2.0     868244603 NA    NA    \n","5       2      1356    3.0     868244603 NA    NA    \n","6       2      1544    3.0     868245920 NA    NA    \n","7       3      1246    4.0    1133570967 NA    NA    \n","8       3      7153    4.0    1133571171 NA    NA    \n","9       3      8783    5.0    1136075857 NA    NA    \n","10      4       208    3.0     844416866 NA    NA    \n","11      4       292    3.0     844416796 NA    NA    \n","12      5        85    3.0     857912791 NA    NA    \n","13      5       230    4.0     857912441 NA    NA    \n","14      5       348    4.0     857912657 NA    NA    \n","15      5       412    5.0     857912441 NA    NA    \n","16      5       446    5.0     857912933 NA    NA    \n","17      5       495    5.0     857912792 NA    NA    \n","18      5       535    3.0     857912441 NA    NA    \n","19      5       592    3.0     857912657 NA    NA    \n","20      5       923    5.0     857912593 NA    NA    \n","21      5      1103    4.0     857912968 NA    NA    \n","22      5      1172    4.0     857913475 NA    NA    \n","23      6      1277    5.0    1001083175 NA    NA    \n","24      6      3623    3.0    1001083383 NA    NA    \n","25      7      1148    4.5    1054292370 NA    NA    \n","26      7      1196    4.0    1049820445 NA    NA    \n","27      7      1234    4.0    1050329550 NA    NA    \n","28      7      1254    5.0    1054292384 NA    NA    \n","29      7      1270    4.0    1049764409 NA    NA    \n","30      7      2762    5.0    1050098559 NA    NA    \n","⋮       ⋮      ⋮       ⋮      ⋮          ⋮     ⋮     \n","999978  71563  5445    3.0    1162133834 NA    NA    \n","999979  71564   678    4.0    1111545391 NA    NA    \n","999980  71564  2146    3.0    1111545310 NA    NA    \n","999981  71564  4571    2.5    1111545191 NA    NA    \n","999982  71564  5445    3.5    1111544973 NA    NA    \n","999983  71564  5945    1.0    1111546077 NA    NA    \n","999984  71564  7193    4.0    1111545615 NA    NA    \n","999985  71565   903    3.0     974295666 NA    NA    \n","999986  71565  1125    4.0     974294786 NA    NA    \n","999987  71565  1228    4.0     974295277 NA    NA    \n","999988  71565  1252    5.0     974295156 NA    NA    \n","999989  71565  2394    3.0     974294564 NA    NA    \n","999990  71565  2526    2.0     974294975 NA    NA    \n","999991  71565  2622    4.0     974294520 NA    NA    \n","999992  71565  2779    3.0     974294760 NA    NA    \n","999993  71565  3421    4.0     974294692 NA    NA    \n","999994  71565  3702    3.0     974294884 NA    NA    \n","999995  71565  3808    4.0     974295467 NA    NA    \n","999996  71566   125    4.0     830341213 NA    NA    \n","999997  71566   222    3.0     830341118 NA    NA    \n","999998  71566   232    4.0     830341155 NA    NA    \n","999999  71566   434    3.0     830340953 NA    NA    \n","1000000 71566   590    4.0     830340802 NA    NA    \n","1000001 71567   480    4.0     912580688 NA    NA    \n","1000002 71567  1721    4.0     912649271 NA    NA    \n","1000003 71567  1748    3.0     912580647 NA    NA    \n","1000004 71567  1909    2.0     912580688 NA    NA    \n","1000005 71567  1985    1.0     912580553 NA    NA    \n","1000006 71567  2107    1.0     912580553 NA    NA    \n","1000007 71567  2338    2.0     912578016 NA    NA    "]},"metadata":{},"output_type":"display_data"}],"source":["temp"]},{"cell_type":"code","execution_count":12,"id":"382300ae","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:40.189301Z","iopub.status.busy":"2023-02-11T09:19:40.187566Z","iopub.status.idle":"2023-02-11T09:19:40.740974Z","shell.execute_reply":"2023-02-11T09:19:40.738929Z"},"papermill":{"duration":0.570229,"end_time":"2023-02-11T09:19:40.744549","exception":false,"start_time":"2023-02-11T09:19:40.17432","status":"completed"},"tags":[]},"outputs":[],"source":["# Make sure userId and movieId in the 'validation' set are also in 'edx' set\n","validation <- temp %>% \n","  semi_join(edx, by = \"movieId\") %>%\n","  semi_join(edx, by = \"userId\")"]},{"cell_type":"code","execution_count":13,"id":"4ce5d0a2","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:40.770648Z","iopub.status.busy":"2023-02-11T09:19:40.768838Z","iopub.status.idle":"2023-02-11T09:19:40.857517Z","shell.execute_reply":"2023-02-11T09:19:40.85556Z"},"papermill":{"duration":0.104479,"end_time":"2023-02-11T09:19:40.86022","exception":false,"start_time":"2023-02-11T09:19:40.755741","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.table: 999997 × 6</caption>\n","<thead>\n","\t<tr><th scope=col>userId</th><th scope=col>movieId</th><th scope=col>rating</th><th scope=col>timestamp</th><th scope=col>title</th><th scope=col>genres</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td> 329</td><td>5.0</td><td> 838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td> 356</td><td>5.0</td><td> 838983653</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td> 616</td><td>5.0</td><td> 838984941</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td> 802</td><td>2.0</td><td> 868244603</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>1356</td><td>3.0</td><td> 868244603</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>2</td><td>1544</td><td>3.0</td><td> 868245920</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>3</td><td>1246</td><td>4.0</td><td>1133570967</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>3</td><td>7153</td><td>4.0</td><td>1133571171</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>3</td><td>8783</td><td>5.0</td><td>1136075857</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>4</td><td> 208</td><td>3.0</td><td> 844416866</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>4</td><td> 292</td><td>3.0</td><td> 844416796</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td>  85</td><td>3.0</td><td> 857912791</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 230</td><td>4.0</td><td> 857912441</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 348</td><td>4.0</td><td> 857912657</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 412</td><td>5.0</td><td> 857912441</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 446</td><td>5.0</td><td> 857912933</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 495</td><td>5.0</td><td> 857912792</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 535</td><td>3.0</td><td> 857912441</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 592</td><td>3.0</td><td> 857912657</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td> 923</td><td>5.0</td><td> 857912593</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td>1103</td><td>4.0</td><td> 857912968</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>5</td><td>1172</td><td>4.0</td><td> 857913475</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>6</td><td>1277</td><td>5.0</td><td>1001083175</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>6</td><td>3623</td><td>3.0</td><td>1001083383</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1148</td><td>4.5</td><td>1054292370</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1196</td><td>4.0</td><td>1049820445</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1234</td><td>4.0</td><td>1050329550</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1254</td><td>5.0</td><td>1054292384</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>1270</td><td>4.0</td><td>1049764409</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7</td><td>2762</td><td>5.0</td><td>1050098559</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>\n","\t<tr><td>71563</td><td>5445</td><td>3.0</td><td>1162133834</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td> 678</td><td>4.0</td><td>1111545391</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>2146</td><td>3.0</td><td>1111545310</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>4571</td><td>2.5</td><td>1111545191</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>5445</td><td>3.5</td><td>1111544973</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>5945</td><td>1.0</td><td>1111546077</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71564</td><td>7193</td><td>4.0</td><td>1111545615</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td> 903</td><td>3.0</td><td> 974295666</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>1125</td><td>4.0</td><td> 974294786</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>1228</td><td>4.0</td><td> 974295277</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>1252</td><td>5.0</td><td> 974295156</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2394</td><td>3.0</td><td> 974294564</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2526</td><td>2.0</td><td> 974294975</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2622</td><td>4.0</td><td> 974294520</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>2779</td><td>3.0</td><td> 974294760</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>3421</td><td>4.0</td><td> 974294692</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>3702</td><td>3.0</td><td> 974294884</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71565</td><td>3808</td><td>4.0</td><td> 974295467</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 125</td><td>4.0</td><td> 830341213</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 222</td><td>3.0</td><td> 830341118</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 232</td><td>4.0</td><td> 830341155</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 434</td><td>3.0</td><td> 830340953</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71566</td><td> 590</td><td>4.0</td><td> 830340802</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td> 480</td><td>4.0</td><td> 912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1721</td><td>4.0</td><td> 912649271</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1748</td><td>3.0</td><td> 912580647</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1909</td><td>2.0</td><td> 912580688</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>1985</td><td>1.0</td><td> 912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2107</td><td>1.0</td><td> 912580553</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>71567</td><td>2338</td><td>2.0</td><td> 912578016</td><td>NA</td><td>NA</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.table: 999997 × 6\n","\\begin{tabular}{llllll}\n"," userId & movieId & rating & timestamp & title & genres\\\\\n"," <int> & <dbl> & <dbl> & <int> & <chr> & <chr>\\\\\n","\\hline\n","\t 1 &  329 & 5.0 &  838983392 & NA & NA\\\\\n","\t 1 &  356 & 5.0 &  838983653 & NA & NA\\\\\n","\t 1 &  616 & 5.0 &  838984941 & NA & NA\\\\\n","\t 2 &  802 & 2.0 &  868244603 & NA & NA\\\\\n","\t 2 & 1356 & 3.0 &  868244603 & NA & NA\\\\\n","\t 2 & 1544 & 3.0 &  868245920 & NA & NA\\\\\n","\t 3 & 1246 & 4.0 & 1133570967 & NA & NA\\\\\n","\t 3 & 7153 & 4.0 & 1133571171 & NA & NA\\\\\n","\t 3 & 8783 & 5.0 & 1136075857 & NA & NA\\\\\n","\t 4 &  208 & 3.0 &  844416866 & NA & NA\\\\\n","\t 4 &  292 & 3.0 &  844416796 & NA & NA\\\\\n","\t 5 &   85 & 3.0 &  857912791 & NA & NA\\\\\n","\t 5 &  230 & 4.0 &  857912441 & NA & NA\\\\\n","\t 5 &  348 & 4.0 &  857912657 & NA & NA\\\\\n","\t 5 &  412 & 5.0 &  857912441 & NA & NA\\\\\n","\t 5 &  446 & 5.0 &  857912933 & NA & NA\\\\\n","\t 5 &  495 & 5.0 &  857912792 & NA & NA\\\\\n","\t 5 &  535 & 3.0 &  857912441 & NA & NA\\\\\n","\t 5 &  592 & 3.0 &  857912657 & NA & NA\\\\\n","\t 5 &  923 & 5.0 &  857912593 & NA & NA\\\\\n","\t 5 & 1103 & 4.0 &  857912968 & NA & NA\\\\\n","\t 5 & 1172 & 4.0 &  857913475 & NA & NA\\\\\n","\t 6 & 1277 & 5.0 & 1001083175 & NA & NA\\\\\n","\t 6 & 3623 & 3.0 & 1001083383 & NA & NA\\\\\n","\t 7 & 1148 & 4.5 & 1054292370 & NA & NA\\\\\n","\t 7 & 1196 & 4.0 & 1049820445 & NA & NA\\\\\n","\t 7 & 1234 & 4.0 & 1050329550 & NA & NA\\\\\n","\t 7 & 1254 & 5.0 & 1054292384 & NA & NA\\\\\n","\t 7 & 1270 & 4.0 & 1049764409 & NA & NA\\\\\n","\t 7 & 2762 & 5.0 & 1050098559 & NA & NA\\\\\n","\t ⋮ & ⋮ & ⋮ & ⋮ & ⋮ & ⋮\\\\\n","\t 71563 & 5445 & 3.0 & 1162133834 & NA & NA\\\\\n","\t 71564 &  678 & 4.0 & 1111545391 & NA & NA\\\\\n","\t 71564 & 2146 & 3.0 & 1111545310 & NA & NA\\\\\n","\t 71564 & 4571 & 2.5 & 1111545191 & NA & NA\\\\\n","\t 71564 & 5445 & 3.5 & 1111544973 & NA & NA\\\\\n","\t 71564 & 5945 & 1.0 & 1111546077 & NA & NA\\\\\n","\t 71564 & 7193 & 4.0 & 1111545615 & NA & NA\\\\\n","\t 71565 &  903 & 3.0 &  974295666 & NA & NA\\\\\n","\t 71565 & 1125 & 4.0 &  974294786 & NA & NA\\\\\n","\t 71565 & 1228 & 4.0 &  974295277 & NA & NA\\\\\n","\t 71565 & 1252 & 5.0 &  974295156 & NA & NA\\\\\n","\t 71565 & 2394 & 3.0 &  974294564 & NA & NA\\\\\n","\t 71565 & 2526 & 2.0 &  974294975 & NA & NA\\\\\n","\t 71565 & 2622 & 4.0 &  974294520 & NA & NA\\\\\n","\t 71565 & 2779 & 3.0 &  974294760 & NA & NA\\\\\n","\t 71565 & 3421 & 4.0 &  974294692 & NA & NA\\\\\n","\t 71565 & 3702 & 3.0 &  974294884 & NA & NA\\\\\n","\t 71565 & 3808 & 4.0 &  974295467 & NA & NA\\\\\n","\t 71566 &  125 & 4.0 &  830341213 & NA & NA\\\\\n","\t 71566 &  222 & 3.0 &  830341118 & NA & NA\\\\\n","\t 71566 &  232 & 4.0 &  830341155 & NA & NA\\\\\n","\t 71566 &  434 & 3.0 &  830340953 & NA & NA\\\\\n","\t 71566 &  590 & 4.0 &  830340802 & NA & NA\\\\\n","\t 71567 &  480 & 4.0 &  912580688 & NA & NA\\\\\n","\t 71567 & 1721 & 4.0 &  912649271 & NA & NA\\\\\n","\t 71567 & 1748 & 3.0 &  912580647 & NA & NA\\\\\n","\t 71567 & 1909 & 2.0 &  912580688 & NA & NA\\\\\n","\t 71567 & 1985 & 1.0 &  912580553 & NA & NA\\\\\n","\t 71567 & 2107 & 1.0 &  912580553 & NA & NA\\\\\n","\t 71567 & 2338 & 2.0 &  912578016 & NA & NA\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.table: 999997 × 6\n","\n","| userId &lt;int&gt; | movieId &lt;dbl&gt; | rating &lt;dbl&gt; | timestamp &lt;int&gt; | title &lt;chr&gt; | genres &lt;chr&gt; |\n","|---|---|---|---|---|---|\n","| 1 |  329 | 5.0 |  838983392 | NA | NA |\n","| 1 |  356 | 5.0 |  838983653 | NA | NA |\n","| 1 |  616 | 5.0 |  838984941 | NA | NA |\n","| 2 |  802 | 2.0 |  868244603 | NA | NA |\n","| 2 | 1356 | 3.0 |  868244603 | NA | NA |\n","| 2 | 1544 | 3.0 |  868245920 | NA | NA |\n","| 3 | 1246 | 4.0 | 1133570967 | NA | NA |\n","| 3 | 7153 | 4.0 | 1133571171 | NA | NA |\n","| 3 | 8783 | 5.0 | 1136075857 | NA | NA |\n","| 4 |  208 | 3.0 |  844416866 | NA | NA |\n","| 4 |  292 | 3.0 |  844416796 | NA | NA |\n","| 5 |   85 | 3.0 |  857912791 | NA | NA |\n","| 5 |  230 | 4.0 |  857912441 | NA | NA |\n","| 5 |  348 | 4.0 |  857912657 | NA | NA |\n","| 5 |  412 | 5.0 |  857912441 | NA | NA |\n","| 5 |  446 | 5.0 |  857912933 | NA | NA |\n","| 5 |  495 | 5.0 |  857912792 | NA | NA |\n","| 5 |  535 | 3.0 |  857912441 | NA | NA |\n","| 5 |  592 | 3.0 |  857912657 | NA | NA |\n","| 5 |  923 | 5.0 |  857912593 | NA | NA |\n","| 5 | 1103 | 4.0 |  857912968 | NA | NA |\n","| 5 | 1172 | 4.0 |  857913475 | NA | NA |\n","| 6 | 1277 | 5.0 | 1001083175 | NA | NA |\n","| 6 | 3623 | 3.0 | 1001083383 | NA | NA |\n","| 7 | 1148 | 4.5 | 1054292370 | NA | NA |\n","| 7 | 1196 | 4.0 | 1049820445 | NA | NA |\n","| 7 | 1234 | 4.0 | 1050329550 | NA | NA |\n","| 7 | 1254 | 5.0 | 1054292384 | NA | NA |\n","| 7 | 1270 | 4.0 | 1049764409 | NA | NA |\n","| 7 | 2762 | 5.0 | 1050098559 | NA | NA |\n","| ⋮ | ⋮ | ⋮ | ⋮ | ⋮ | ⋮ |\n","| 71563 | 5445 | 3.0 | 1162133834 | NA | NA |\n","| 71564 |  678 | 4.0 | 1111545391 | NA | NA |\n","| 71564 | 2146 | 3.0 | 1111545310 | NA | NA |\n","| 71564 | 4571 | 2.5 | 1111545191 | NA | NA |\n","| 71564 | 5445 | 3.5 | 1111544973 | NA | NA |\n","| 71564 | 5945 | 1.0 | 1111546077 | NA | NA |\n","| 71564 | 7193 | 4.0 | 1111545615 | NA | NA |\n","| 71565 |  903 | 3.0 |  974295666 | NA | NA |\n","| 71565 | 1125 | 4.0 |  974294786 | NA | NA |\n","| 71565 | 1228 | 4.0 |  974295277 | NA | NA |\n","| 71565 | 1252 | 5.0 |  974295156 | NA | NA |\n","| 71565 | 2394 | 3.0 |  974294564 | NA | NA |\n","| 71565 | 2526 | 2.0 |  974294975 | NA | NA |\n","| 71565 | 2622 | 4.0 |  974294520 | NA | NA |\n","| 71565 | 2779 | 3.0 |  974294760 | NA | NA |\n","| 71565 | 3421 | 4.0 |  974294692 | NA | NA |\n","| 71565 | 3702 | 3.0 |  974294884 | NA | NA |\n","| 71565 | 3808 | 4.0 |  974295467 | NA | NA |\n","| 71566 |  125 | 4.0 |  830341213 | NA | NA |\n","| 71566 |  222 | 3.0 |  830341118 | NA | NA |\n","| 71566 |  232 | 4.0 |  830341155 | NA | NA |\n","| 71566 |  434 | 3.0 |  830340953 | NA | NA |\n","| 71566 |  590 | 4.0 |  830340802 | NA | NA |\n","| 71567 |  480 | 4.0 |  912580688 | NA | NA |\n","| 71567 | 1721 | 4.0 |  912649271 | NA | NA |\n","| 71567 | 1748 | 3.0 |  912580647 | NA | NA |\n","| 71567 | 1909 | 2.0 |  912580688 | NA | NA |\n","| 71567 | 1985 | 1.0 |  912580553 | NA | NA |\n","| 71567 | 2107 | 1.0 |  912580553 | NA | NA |\n","| 71567 | 2338 | 2.0 |  912578016 | NA | NA |\n","\n"],"text/plain":["       userId movieId rating timestamp  title genres\n","1      1       329    5.0     838983392 NA    NA    \n","2      1       356    5.0     838983653 NA    NA    \n","3      1       616    5.0     838984941 NA    NA    \n","4      2       802    2.0     868244603 NA    NA    \n","5      2      1356    3.0     868244603 NA    NA    \n","6      2      1544    3.0     868245920 NA    NA    \n","7      3      1246    4.0    1133570967 NA    NA    \n","8      3      7153    4.0    1133571171 NA    NA    \n","9      3      8783    5.0    1136075857 NA    NA    \n","10     4       208    3.0     844416866 NA    NA    \n","11     4       292    3.0     844416796 NA    NA    \n","12     5        85    3.0     857912791 NA    NA    \n","13     5       230    4.0     857912441 NA    NA    \n","14     5       348    4.0     857912657 NA    NA    \n","15     5       412    5.0     857912441 NA    NA    \n","16     5       446    5.0     857912933 NA    NA    \n","17     5       495    5.0     857912792 NA    NA    \n","18     5       535    3.0     857912441 NA    NA    \n","19     5       592    3.0     857912657 NA    NA    \n","20     5       923    5.0     857912593 NA    NA    \n","21     5      1103    4.0     857912968 NA    NA    \n","22     5      1172    4.0     857913475 NA    NA    \n","23     6      1277    5.0    1001083175 NA    NA    \n","24     6      3623    3.0    1001083383 NA    NA    \n","25     7      1148    4.5    1054292370 NA    NA    \n","26     7      1196    4.0    1049820445 NA    NA    \n","27     7      1234    4.0    1050329550 NA    NA    \n","28     7      1254    5.0    1054292384 NA    NA    \n","29     7      1270    4.0    1049764409 NA    NA    \n","30     7      2762    5.0    1050098559 NA    NA    \n","⋮      ⋮      ⋮       ⋮      ⋮          ⋮     ⋮     \n","999968 71563  5445    3.0    1162133834 NA    NA    \n","999969 71564   678    4.0    1111545391 NA    NA    \n","999970 71564  2146    3.0    1111545310 NA    NA    \n","999971 71564  4571    2.5    1111545191 NA    NA    \n","999972 71564  5445    3.5    1111544973 NA    NA    \n","999973 71564  5945    1.0    1111546077 NA    NA    \n","999974 71564  7193    4.0    1111545615 NA    NA    \n","999975 71565   903    3.0     974295666 NA    NA    \n","999976 71565  1125    4.0     974294786 NA    NA    \n","999977 71565  1228    4.0     974295277 NA    NA    \n","999978 71565  1252    5.0     974295156 NA    NA    \n","999979 71565  2394    3.0     974294564 NA    NA    \n","999980 71565  2526    2.0     974294975 NA    NA    \n","999981 71565  2622    4.0     974294520 NA    NA    \n","999982 71565  2779    3.0     974294760 NA    NA    \n","999983 71565  3421    4.0     974294692 NA    NA    \n","999984 71565  3702    3.0     974294884 NA    NA    \n","999985 71565  3808    4.0     974295467 NA    NA    \n","999986 71566   125    4.0     830341213 NA    NA    \n","999987 71566   222    3.0     830341118 NA    NA    \n","999988 71566   232    4.0     830341155 NA    NA    \n","999989 71566   434    3.0     830340953 NA    NA    \n","999990 71566   590    4.0     830340802 NA    NA    \n","999991 71567   480    4.0     912580688 NA    NA    \n","999992 71567  1721    4.0     912649271 NA    NA    \n","999993 71567  1748    3.0     912580647 NA    NA    \n","999994 71567  1909    2.0     912580688 NA    NA    \n","999995 71567  1985    1.0     912580553 NA    NA    \n","999996 71567  2107    1.0     912580553 NA    NA    \n","999997 71567  2338    2.0     912578016 NA    NA    "]},"metadata":{},"output_type":"display_data"}],"source":["validation"]},{"cell_type":"code","execution_count":14,"id":"c5773663","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:40.88723Z","iopub.status.busy":"2023-02-11T09:19:40.885444Z","iopub.status.idle":"2023-02-11T09:19:41.569752Z","shell.execute_reply":"2023-02-11T09:19:41.567702Z"},"papermill":{"duration":0.700539,"end_time":"2023-02-11T09:19:41.572386","exception":false,"start_time":"2023-02-11T09:19:40.871847","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["\u001b[1m\u001b[22mJoining, by = c(\"userId\", \"movieId\", \"rating\", \"timestamp\", \"title\", \"genres\")\n"]}],"source":["# Add rows removed from 'validation' set back into 'edx' set\n","removed <- anti_join(temp, validation)\n","edx <- rbind(edx, removed)"]},{"cell_type":"code","execution_count":15,"id":"9fa2dc8d","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:41.599026Z","iopub.status.busy":"2023-02-11T09:19:41.597407Z","iopub.status.idle":"2023-02-11T09:19:41.61322Z","shell.execute_reply":"2023-02-11T09:19:41.611329Z"},"papermill":{"duration":0.031971,"end_time":"2023-02-11T09:19:41.615734","exception":false,"start_time":"2023-02-11T09:19:41.583763","status":"completed"},"tags":[]},"outputs":[],"source":["rm(ratings, movies, test_index, temp, movielens, removed)"]},{"cell_type":"markdown","id":"14b89625","metadata":{"papermill":{"duration":0.011605,"end_time":"2023-02-11T09:19:41.638895","exception":false,"start_time":"2023-02-11T09:19:41.62729","status":"completed"},"tags":[]},"source":["- The edx set is used for training and testing, and the validation set is used for final validation to simulate the new data.\n","\n","- We split the edx set in 2 parts: the training set and the test set.\n","\n","- The model building is done in the training set, and the test set is used to test the model. When the model is complete, we use the validation set to calculate the final RMSE.\n","\n","- We use the same procedure used to create edx and validation sets.\n","\n","- The training set will be 90% of edx data and the test set will be the remaining 10%."]},{"cell_type":"code","execution_count":16,"id":"db922e2a","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:41.66619Z","iopub.status.busy":"2023-02-11T09:19:41.664463Z","iopub.status.idle":"2023-02-11T09:19:45.067234Z","shell.execute_reply":"2023-02-11T09:19:45.065217Z"},"papermill":{"duration":3.419689,"end_time":"2023-02-11T09:19:45.070128","exception":false,"start_time":"2023-02-11T09:19:41.650439","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'Mersenne-Twister'</li><li>'Inversion'</li><li>'Rejection'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'Mersenne-Twister'\n","\\item 'Inversion'\n","\\item 'Rejection'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'Mersenne-Twister'\n","2. 'Inversion'\n","3. 'Rejection'\n","\n","\n"],"text/plain":["[1] \"Mersenne-Twister\" \"Inversion\"        \"Rejection\"       "]},"metadata":{},"output_type":"display_data"}],"source":["set.seed(1234)\n","RNGkind()\n","\n","#set.seed(1234, sample.kind=\"Rounding\")\n","test_index <- createDataPartition(y = edx$rating, times = 1, p = 0.1, list = FALSE)\n","train_set <- edx[-test_index,]\n","temp <- edx[test_index,]"]},{"cell_type":"code","execution_count":17,"id":"e5211412","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:45.098378Z","iopub.status.busy":"2023-02-11T09:19:45.096733Z","iopub.status.idle":"2023-02-11T09:19:45.524501Z","shell.execute_reply":"2023-02-11T09:19:45.522446Z"},"papermill":{"duration":0.444437,"end_time":"2023-02-11T09:19:45.527031","exception":false,"start_time":"2023-02-11T09:19:45.082594","status":"completed"},"tags":[]},"outputs":[],"source":["# Make sure userId and movieId in test set are also in train set\n","test_set <- temp %>% \n","  semi_join(train_set, by = \"movieId\") %>%\n","  semi_join(train_set, by = \"userId\")"]},{"cell_type":"code","execution_count":18,"id":"8836a3fa","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:45.553896Z","iopub.status.busy":"2023-02-11T09:19:45.552232Z","iopub.status.idle":"2023-02-11T09:19:46.027052Z","shell.execute_reply":"2023-02-11T09:19:46.025018Z"},"papermill":{"duration":0.491083,"end_time":"2023-02-11T09:19:46.029609","exception":false,"start_time":"2023-02-11T09:19:45.538526","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["\u001b[1m\u001b[22mJoining, by = c(\"userId\", \"movieId\", \"rating\", \"timestamp\", \"title\", \"genres\")\n"]}],"source":["# Add rows removed from test set back into train set\n","removed <- anti_join(temp, test_set)\n","train_set <- rbind(train_set, removed)"]},{"cell_type":"code","execution_count":19,"id":"efe556da","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:46.057005Z","iopub.status.busy":"2023-02-11T09:19:46.055359Z","iopub.status.idle":"2023-02-11T09:19:46.070701Z","shell.execute_reply":"2023-02-11T09:19:46.06889Z"},"papermill":{"duration":0.031721,"end_time":"2023-02-11T09:19:46.073161","exception":false,"start_time":"2023-02-11T09:19:46.04144","status":"completed"},"tags":[]},"outputs":[],"source":["rm(test_index, temp, removed)   # rm() Function Remove Objects from Memory"]},{"cell_type":"markdown","id":"ae19808a","metadata":{"papermill":{"duration":0.011805,"end_time":"2023-02-11T09:19:46.097317","exception":false,"start_time":"2023-02-11T09:19:46.085512","status":"completed"},"tags":[]},"source":["# Data Exploration\n","- Before start building the model, we need to understand the structure of the data, the distribution of ratings, and the relationship of the predictors. This information will help build a better model."]},{"cell_type":"code","execution_count":20,"id":"086bdd1a","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:46.125217Z","iopub.status.busy":"2023-02-11T09:19:46.123523Z","iopub.status.idle":"2023-02-11T09:19:46.150146Z","shell.execute_reply":"2023-02-11T09:19:46.147791Z"},"papermill":{"duration":0.044721,"end_time":"2023-02-11T09:19:46.15426","exception":false,"start_time":"2023-02-11T09:19:46.109539","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Classes ‘data.table’ and 'data.frame':\t9000057 obs. of  6 variables:\n"," $ userId   : int  1 1 1 1 1 1 1 1 1 1 ...\n"," $ movieId  : num  122 185 231 292 316 355 362 364 370 377 ...\n"," $ rating   : num  5 5 5 5 5 5 5 5 5 5 ...\n"," $ timestamp: int  838985046 838983525 838983392 838983421 838983392 838984474 838984885 838983707 838984596 838983834 ...\n"," $ title    : chr  NA NA NA NA ...\n"," $ genres   : chr  NA NA NA NA ...\n"," - attr(*, \".internal.selfref\")=<externalptr> \n"]}],"source":["str(edx)"]},{"cell_type":"markdown","id":"234f7bbc","metadata":{"papermill":{"duration":0.01186,"end_time":"2023-02-11T09:19:46.178577","exception":false,"start_time":"2023-02-11T09:19:46.166717","status":"completed"},"tags":[]},"source":["From this initial exploration, we discover that edx has 6 columns:\n","\n","- movieId \tinteger\n","\n","- userId\tinteger\n","\n","- rating\tnumeric\n","\n","- timestamp\tnumeric\n","\n","- title\tcharacter\n","\n","- genres\tcharacter\n"]},{"cell_type":"markdown","id":"0e4cfd4c","metadata":{"papermill":{"duration":0.01183,"end_time":"2023-02-11T09:19:46.202963","exception":false,"start_time":"2023-02-11T09:19:46.191133","status":"completed"},"tags":[]},"source":["## How many rows and columns are there in the edx dataset?"]},{"cell_type":"code","execution_count":21,"id":"5248c26a","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:46.230585Z","iopub.status.busy":"2023-02-11T09:19:46.228938Z","iopub.status.idle":"2023-02-11T09:19:46.249862Z","shell.execute_reply":"2023-02-11T09:19:46.247412Z"},"papermill":{"duration":0.038153,"end_time":"2023-02-11T09:19:46.253005","exception":false,"start_time":"2023-02-11T09:19:46.214852","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>9000057</li><li>6</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 9000057\n","\\item 6\n","\\end{enumerate*}\n"],"text/markdown":["1. 9000057\n","2. 6\n","\n","\n"],"text/plain":["[1] 9000057       6"]},"metadata":{},"output_type":"display_data"}],"source":["dim(edx)"]},{"cell_type":"markdown","id":"e290428f","metadata":{"papermill":{"duration":0.011954,"end_time":"2023-02-11T09:19:46.277237","exception":false,"start_time":"2023-02-11T09:19:46.265283","status":"completed"},"tags":[]},"source":["- The next table shows the structure and content of edx dataset\n","\n","- The dataset is in tidy format, i.e. each row has one observation and the column names are the features. The rating column is the desired outcome. The user information is stored in userId; the movie information is both in movieId and title columns. The rating date is available in timestamp measured in seconds since January 1st, 1970. Each movie is tagged with one or more genres in the genres column."]},{"cell_type":"code","execution_count":22,"id":"f99d98ba","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:46.304748Z","iopub.status.busy":"2023-02-11T09:19:46.303125Z","iopub.status.idle":"2023-02-11T09:19:46.335283Z","shell.execute_reply":"2023-02-11T09:19:46.332731Z"},"papermill":{"duration":0.049331,"end_time":"2023-02-11T09:19:46.338352","exception":false,"start_time":"2023-02-11T09:19:46.289021","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.table: 6 × 6</caption>\n","<thead>\n","\t<tr><th scope=col>userId</th><th scope=col>movieId</th><th scope=col>rating</th><th scope=col>timestamp</th><th scope=col>title</th><th scope=col>genres</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td>122</td><td>5</td><td>838985046</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>185</td><td>5</td><td>838983525</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>231</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>292</td><td>5</td><td>838983421</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>316</td><td>5</td><td>838983392</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>1</td><td>355</td><td>5</td><td>838984474</td><td>NA</td><td>NA</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.table: 6 × 6\n","\\begin{tabular}{llllll}\n"," userId & movieId & rating & timestamp & title & genres\\\\\n"," <int> & <dbl> & <dbl> & <int> & <chr> & <chr>\\\\\n","\\hline\n","\t 1 & 122 & 5 & 838985046 & NA & NA\\\\\n","\t 1 & 185 & 5 & 838983525 & NA & NA\\\\\n","\t 1 & 231 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 292 & 5 & 838983421 & NA & NA\\\\\n","\t 1 & 316 & 5 & 838983392 & NA & NA\\\\\n","\t 1 & 355 & 5 & 838984474 & NA & NA\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.table: 6 × 6\n","\n","| userId &lt;int&gt; | movieId &lt;dbl&gt; | rating &lt;dbl&gt; | timestamp &lt;int&gt; | title &lt;chr&gt; | genres &lt;chr&gt; |\n","|---|---|---|---|---|---|\n","| 1 | 122 | 5 | 838985046 | NA | NA |\n","| 1 | 185 | 5 | 838983525 | NA | NA |\n","| 1 | 231 | 5 | 838983392 | NA | NA |\n","| 1 | 292 | 5 | 838983421 | NA | NA |\n","| 1 | 316 | 5 | 838983392 | NA | NA |\n","| 1 | 355 | 5 | 838984474 | NA | NA |\n","\n"],"text/plain":["  userId movieId rating timestamp title genres\n","1 1      122     5      838985046 NA    NA    \n","2 1      185     5      838983525 NA    NA    \n","3 1      231     5      838983392 NA    NA    \n","4 1      292     5      838983421 NA    NA    \n","5 1      316     5      838983392 NA    NA    \n","6 1      355     5      838984474 NA    NA    "]},"metadata":{},"output_type":"display_data"}],"source":["head(edx)"]},{"cell_type":"markdown","id":"56c6409c","metadata":{"papermill":{"duration":0.012299,"end_time":"2023-02-11T09:19:46.363209","exception":false,"start_time":"2023-02-11T09:19:46.35091","status":"completed"},"tags":[]},"source":["## Genres exploration\n","- Along with the movie title, MovieLens provides the list of genres for each movie. Although this information can be used to make better predictions, this research doesn’t use it. However, it’s worth exploring this information as well.\n","- The data set contains 797 different combinations of genres. Here is the list of the first six."]},{"cell_type":"code","execution_count":23,"id":"503ef09e","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:46.391409Z","iopub.status.busy":"2023-02-11T09:19:46.389673Z","iopub.status.idle":"2023-02-11T09:19:46.705726Z","shell.execute_reply":"2023-02-11T09:19:46.703166Z"},"papermill":{"duration":0.333643,"end_time":"2023-02-11T09:19:46.709132","exception":false,"start_time":"2023-02-11T09:19:46.375489","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["1"],"text/latex":["1"],"text/markdown":["1"],"text/plain":["[1] 1"]},"metadata":{},"output_type":"display_data"}],"source":["length(unique(edx$genres))"]},{"cell_type":"code","execution_count":24,"id":"487879fb","metadata":{"execution":{"iopub.execute_input":"2023-02-11T09:19:46.738158Z","iopub.status.busy":"2023-02-11T09:19:46.736445Z","iopub.status.idle":"2023-02-11T09:19:47.070606Z","shell.execute_reply":"2023-02-11T09:19:47.068741Z"},"papermill":{"duration":0.351238,"end_time":"2023-02-11T09:19:47.073026","exception":false,"start_time":"2023-02-11T09:19:46.721788","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 1 × 2</caption>\n","<thead>\n","\t<tr><th scope=col>genres</th><th scope=col>n</th></tr>\n","\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>NA</td><td>9000057</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 1 × 2\n","\\begin{tabular}{ll}\n"," genres & n\\\\\n"," <chr> & <int>\\\\\n","\\hline\n","\t NA & 9000057\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 1 × 2\n","\n","| genres &lt;chr&gt; | n &lt;int&gt; |\n","|---|---|\n","| NA | 9000057 |\n","\n"],"text/plain":["  genres n      \n","1 NA     9000057"]},"metadata":{},"output_type":"display_data"}],"source":["edx %>% group_by(genres) %>% \n","  summarise(n=n()) %>%\n","  head()"]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.0.5"},"papermill":{"default_parameters":{},"duration":199.35964,"end_time":"2023-02-11T09:19:47.309391","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2023-02-11T09:16:27.949751","version":"2.4.0"}},"nbformat":4,"nbformat_minor":5}